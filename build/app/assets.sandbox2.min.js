(function(e){"use strict";var t,n;(function(){t=function(){return},t(n),e.global=e.modeJs==="browser"?window:global,n=function(t){switch(t){case"async":return{apply:function(e,t){return function(n){e(t,n)}},waterfall:function(e,t){var n,r;n=-1,r=function(i)
{n+=1;if(i||!e[n]){t(i);return}e[n](r)},r()}};case"mkdirp":return function(t,n){var r;if(t&&t===e.fsDirInitialized){n();return}try{e.fs.existsSync(t)||e.child_process.spawnSync("mkdir",["-p",t],{stdio:["ignore",1,2]})}catch(i){r=i}n(r)};default:return e.require2
(t)}}})(),function(){if(e.modeJs==="node"){var t=n("fs"),r=n("mkdirp"),i=n("async"),s=n("path"),o={};o.exists=t.exists,o.rename=t.rename,o.writeFile=t.writeFile,o.unlink=t.unlink,o.appendFile=t.appendFile,o.readFile=t.readFile,o.mkdirp=r,o.ensureFileDoesntExist=
function(e,t){o.exists(e,function(n){if(!n)return t(null);o.unlink(e,function(e){return t(e)})})},o.flushToStorage=function(e,n){var r,i;typeof e=="string"?(r=e,i="r+"):(r=e.filename,i=e.isDir?"r":"r+");if(i==="r"&&(process.platform==="win32"||process.platform==="win64"
))return n(null);t.open(r,i,function(e,r){if(e)return n(e);t.fsync(r,function(e){t.close(r,function(t){if(e||t){var r=new Error("Failed to flush to storage");return r.errorOnFsync=e,r.errorOnClose=t,n(r)}return n(null)})})})},o.crashSafeWriteFile=function(e
,t,n){var r=n||function(){},u=e+"~";i.waterfall([i.apply(o.flushToStorage,{filename:s.dirname(e),isDir:!0}),function(t){o.exists(e,function(n){if(!n)return t();o.flushToStorage(e,function(e){return t(e)})})},function(e){o.writeFile(u,t,function(t){return e(
t)})},i.apply(o.flushToStorage,u),function(t){o.rename(u,e,function(e){return t(e)})},i.apply(o.flushToStorage,{filename:s.dirname(e),isDir:!0})],function(e){return r(e)})},o.ensureDatafileIntegrity=function(e,t){var n=e+"~";o.exists(e,function(r){if(r)return t
(null);o.exists(n,function(r){if(!r)return o.writeFile(e,"","utf8",function(e){t(e)});o.rename(n,e,function(e){return t(e)})})})},module.exports=o,e.storage=module.exports}}(),function(e){if("function"==typeof bootstrap)bootstrap("nedb",e);else if("object"==typeof 
exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeNedb=e}else"undefined"!=typeof window?window.Nedb=e():global.Nedb=e()}(function(){var t,r,i,s,o;return function(t
,r,i){function s(i,u){if(!r[i]){if(!t[i]){var a=typeof n=="function"&&n;if(!u&&a)return a(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var f=r[i]={exports:{}};t[i][0].call(f.exports,function(n){var r=t[i][1][n];return e[n]=s(r?r:n
)},f,f.exports)}return r[i].exports}var o=typeof n=="function"&&n;for(var u=0;u<i.length;u++)s(i[u]);return s}({1:[function(e,t,n){function o(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}var r=e("__browserify_process"
);r.EventEmitter||(r.EventEmitter=function(){});var i=n.EventEmitter=r.EventEmitter,s=typeof Array.isArray=="function"?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},u=10;i.prototype.setMaxListeners=function(e){this._events||
(this._events={}),this._events.maxListeners=e},i.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event."
);if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype
.slice.call(arguments,1);t.apply(this,n)}return!0}if(s(t)){var n=Array.prototype.slice.call(arguments,1),r=t.slice();for(var i=0,o=r.length;i<o;i++)r[i].apply(this,n);return!0}return!1},i.prototype.addListener=function(e,t){if("function"!=typeof t)throw new 
Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",e,t);if(!this._events[e])this._events[e]=t;else if(s(this._events[e])){if(!this._events[e].warned){var n;this._events.maxListeners!==undefined?n=this
._events.maxListeners:n=u,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console
.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},i.prototype
.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(s(n)){var r=o(n,t);if(r<0)return this;n.splice(r,1),n.length==0&&delete 
this._events[e]}else this._events[e]===t&&delete this._events[e];return this},i.prototype.removeAllListeners=function(e){return arguments.length===0?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},i.prototype.listeners=
function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},i.listenerCount=function(e,t){var n;return!e._events||!e._events[t]?n=0:typeof e._events[t]=="function"?
n=1:n=e._events[t].length,n}},{__browserify_process:4}],2:[function(e,t,n){function i(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function s(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(
e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=e("__browserify_process"),o=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var o=n>=0?arguments[n]
:r.cwd();if(typeof o!="string"||!o)continue;e=o+"/"+e,t=o.charAt(0)==="/"}return e=s(i(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=s(i(e.split("/"),function(
e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=o.exec(e)[1
]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=o.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o.exec
(e)[3]||""},n.relative=function(e,t){function r(e){var t=0;for(;t<e.length;t++)if(e[t]!=="")break;var n=e.length-1;for(;n>=0;n--)if(e[n]!=="")break;return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);var i=r(e.split("/")),s=r(t.
split("/")),o=Math.min(i.length,s.length),u=o;for(var a=0;a<o;a++)if(i[a]!==s[a]){u=a;break}var f=[];for(var a=u;a<i.length;a++)f.push("..");return f=f.concat(s.slice(u)),f.join("/")},n.sep="/"},{__browserify_process:4}],3:[function(e,t,n){function i(e){return Array
.isArray(e)||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Array]"}function s(e){typeof e=="object"&&Object.prototype.toString.call(e)==="[object RegExp]"}function o(e){return typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"
}function u(e){return e<10?"0"+e.toString(10):e.toString(10)}function f(){var e=new Date,t=[u(e.getHours()),u(e.getMinutes()),u(e.getSeconds())].join(":");return[e.getDate(),a[e.getMonth()],t].join(" ")}var r=e("events");n.isArray=i,n.isDate=function(e){return Object
.prototype.toString.call(e)==="[object Date]"},n.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(e,t,r,u){function h(e,r){if(e&&typeof e.inspect=="function"&&
e!==n&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(r);switch(typeof e){case"undefined":return f("undefined","undefined");case"string":var u="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f(u,"string"
);case"number":return f(""+e,"number");case"boolean":return f(""+e,"boolean")}if(e===null)return f("null","null");var p=l(e),d=t?c(e):p;if(typeof e=="function"&&d.length===0){if(s(e))return f(""+e,"regexp");var v=e.name?": "+e.name:"";return f("[Function"+v+"]"
,"special")}if(o(e)&&d.length===0)return f(e.toUTCString(),"date");var m,g,y;i(e)?(g="Array",y=["[","]"]):(g="Object",y=["{","}"]);if(typeof e=="function"){var b=e.name?": "+e.name:"";m=s(e)?" "+e:" [Function"+b+"]"}else m="";o(e)&&(m=" "+e.toUTCString());if(
d.length===0)return y[0]+m+y[1];if(r<0)return s(e)?f(""+e,"regexp"):f("[Object]","special");a.push(e);var w=d.map(function(t){var n,s;e.__lookupGetter__&&(e.__lookupGetter__(t)?e.__lookupSetter__(t)?s=f("[Getter/Setter]","special"):s=f("[Getter]","special")
:e.__lookupSetter__(t)&&(s=f("[Setter]","special"))),p.indexOf(t)<0&&(n="["+t+"]"),s||(a.indexOf(e[t])<0?(r===null?s=h(e[t]):s=h(e[t],r-1),s.indexOf("\n")>-1&&(i(e)?s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):s="\n"+s.split("\n").map
(function(e){return"   "+e}).join("\n"))):s=f("[Circular]","special"));if(typeof n=="undefined"){if(g==="Array"&&t.match(/^\d+$/))return s;n=JSON.stringify(""+t),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=f(n,"name")):(n=n.replace(/'/g
,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=f(n,"string"))}return n+": "+s});a.pop();var E=0,S=w.reduce(function(e,t){return E++,t.indexOf("\n")>=0&&E++,e+t.length+1},0);return S>50?w=y[0]+(m===""?"":m+"\n ")+" "+w.join(",\n  ")+" "+y[1]:w=y[0]+m+" "+
w.join(", ")+" "+y[1],w}var a=[],f=function(e,t){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",
number:"blue","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[t];return r?"["+n[r][0]+"m"+e+"["+n[r][1]+"m":e};return u||(f=function(e,t){return e}),h(e,typeof r=="undefined"?2:r)};var a=["Jan","Feb","Mar","Apr"
,"May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(e){},n.pump=null;var l=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},c=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.hasOwnProperty.call(e,n)&&t
.push(n);return t},h=Object.create||function(e,t){var n;if(e===null)n={__proto__:null};else{if(typeof e!="object")throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var r=function(){};r.prototype=e,n=new r,n.__proto__=e}return typeof t!="undefined"&&
Object.defineProperties&&Object.defineProperties(n,t),n};n.inherits=function(e,t){e.super_=t,e.prototype=h(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};var p=/%[sdj%]/g;n.format=function(e){if(typeof e!="string"){var t=[];
for(var r=0;r<arguments.length;r++)t.push(n.inspect(arguments[r]));return t.join(" ")}var r=1,i=arguments,s=i.length,o=String(e).replace(p,function(e){if(e==="%%")return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++
]);case"%j":return JSON.stringify(i[r++]);default:return e}});for(var u=i[r];r<s;u=i[++r])u===null||typeof u!="object"?o+=" "+u:o+=" "+n.inspect(u);return o}},{events:1}],4:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e=typeof window!="undefined"&&
window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&
e.data==="process-tick"){e.stopPropagation();if(n.length>0){var r=n.shift();r()}}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(
e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],5:[function(e,t,n){function s(e,t,n){this.db=e,this.query=t||{},n&&(this.execFn=n)}var r=e("./model"
),i=e("underscore");s.prototype.limit=function(e){return this._limit=e,this},s.prototype.skip=function(e){return this._skip=e,this},s.prototype.sort=function(e){return this._sort=e,this},s.prototype.projection=function(e){return this._projection=e,this},s.prototype
.project=function(e){var t=[],n=this,s,o,u;return this._projection===undefined||Object.keys(this._projection).length===0?e:(s=this._projection._id===0?!1:!0,this._projection=i.omit(this._projection,"_id"),u=Object.keys(this._projection),u.forEach(function(e
){if(o!==undefined&&n._projection[e]!==o)throw new Error("Can't both keep and omit fields except for _id");o=n._projection[e]}),e.forEach(function(e){var n;o===1?(n={$set:{}},u.forEach(function(t){n.$set[t]=r.getDotValue(e,t),n.$set[t]===undefined&&delete n
.$set[t]}),n=r.modify({},n)):(n={$unset:{}},u.forEach(function(e){n.$unset[e]=!0}),n=r.modify(e,n)),s?n._id=e._id:delete n._id,t.push(n)}),t)},s.prototype._exec=function(e){function l(t,n){return s.execFn?s.execFn(t,n,e):e(t,n)}var t=[],n=0,i=0,s=this,o=null
,u,a,f;this.db.getCandidates(this.query,function(e,c){if(e)return l(e);try{for(u=0;u<c.length;u+=1)if(r.match(c[u],s.query))if(!s._sort)if(s._skip&&s._skip>i)i+=1;else{t.push(c[u]),n+=1;if(s._limit&&s._limit<=n)break}else t.push(c[u])}catch(e){return l(e)}if(
s._sort){a=Object.keys(s._sort);var h=[];for(u=0;u<a.length;u++)f=a[u],h.push({key:f,direction:s._sort[f]});t.sort(function(e,t){var n,i,o;for(o=0;o<h.length;o++){n=h[o],i=n.direction*r.compareThings(r.getDotValue(e,n.key),r.getDotValue(t,n.key),s.db.compareStrings
);if(i!==0)return i}return 0});var p=s._limit||t.length,d=s._skip||0;t=t.slice(d,d+p)}try{t=s.project(t)}catch(v){o=v,t=undefined}return l(o,t)})},s.prototype.exec=function(){this.db.executor.push({"this":this,fn:this._exec,arguments:arguments})},t.exports=
s},{"./model":10,underscore:19}],6:[function(e,t,n){function r(e){var t=new Array(e),n;for(var r=0,n;r<e;r++)(r&3)==0&&(n=Math.random()*4294967296),t[r]=n>>>((r&3)<<3)&255;return t}function i(e){function u(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63
]}var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=e.length%3,r="",i,s,o;for(o=0,s=e.length-n;o<s;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],r+=u(i);switch(n){case 1:i=e[e.length-1],r+=t[i>>2],r+=t[i<<4&63],r+="==";break;case 2:i=(e[e.length-2
]<<8)+e[e.length-1],r+=t[i>>10],r+=t[i>>4&63],r+=t[i<<2&63],r+="="}return r}function s(e){return i(r(Math.ceil(Math.max(8,e*2)))).replace(/[+\/]/g,"").slice(0,e)}t.exports.uid=s},{}],7:[function(e,t,n){function h(e){var t;typeof e=="string"?(t=e,this.inMemoryOnly=!1
):(e=e||{},t=e.filename,this.inMemoryOnly=e.inMemoryOnly||!1,this.autoload=e.autoload||!1,this.timestampData=e.timestampData||!1),!t||typeof t!="string"||t.length===0?(this.filename=null,this.inMemoryOnly=!0):this.filename=t,this.compareStrings=e.compareStrings
,this.persistence=new l({db:this,nodeWebkitAppName:e.nodeWebkitAppName,afterSerialization:e.afterSerialization,beforeDeserialization:e.beforeDeserialization,corruptAlertThreshold:e.corruptAlertThreshold}),this.executor=new o,this.inMemoryOnly&&(this.executor
.ready=!0),this.indexes={},this.indexes._id=new u({fieldName:"_id",unique:!0}),this.ttlIndexes={},this.autoload&&this.loadDatabase(e.onload||function(e){if(e)throw e})}var r=e("./customUtils"),i=e("./model"),s=e("async"),o=e("./executor"),u=e("./indexes"),a=
e("util"),f=e("underscore"),l=e("./persistence"),c=e("./cursor");a.inherits(h,e("events").EventEmitter),h.prototype.loadDatabase=function(){this.executor.push({"this":this.persistence,fn:this.persistence.loadDatabase,arguments:arguments},!0)},h.prototype.getAllData=
function(){return this.indexes._id.getAll()},h.prototype.resetIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(n){t.indexes[n].reset(e)})},h.prototype.ensureIndex=function(e,t){var n,r=t||function(){};e=e||{};if(!e.fieldName)return n=new 
Error("Cannot create an index without a fieldName"),n.missingFieldName=!0,r(n);if(this.indexes[e.fieldName])return r(null);this.indexes[e.fieldName]=new u(e),e.expireAfterSeconds!==undefined&&(this.ttlIndexes[e.fieldName]=e.expireAfterSeconds);try{this.indexes
[e.fieldName].insert(this.getAllData())}catch(i){return delete this.indexes[e.fieldName],r(i)}this.persistence.persistNewState([{$$indexCreated:e}],function(e){return e?r(e):r(null)})},h.prototype.removeIndex=function(e,t){var n=t||function(){};delete this.
indexes[e],this.persistence.persistNewState([{$$indexRemoved:e}],function(e){return e?n(e):n(null)})},h.prototype.addToIndexes=function(e){var t,n,r,i=Object.keys(this.indexes);for(t=0;t<i.length;t+=1)try{this.indexes[i[t]].insert(e)}catch(s){n=t,r=s;break}
if(r){for(t=0;t<n;t+=1)this.indexes[i[t]].remove(e);throw r}},h.prototype.removeFromIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(n){t.indexes[n].remove(e)})},h.prototype.updateIndexes=function(e,t){var n,r,i,s=Object.keys(this.indexes
);for(n=0;n<s.length;n+=1)try{this.indexes[s[n]].update(e,t)}catch(o){r=n,i=o;break}if(i){for(n=0;n<r;n+=1)this.indexes[s[n]].revertUpdate(e,t);throw i}},h.prototype.getCandidates=function(e,t,n){var r=Object.keys(this.indexes),i=this,o;typeof t=="function"&&
(n=t,t=!1),s.waterfall([function(t){return o=[],Object.keys(e).forEach(function(t){(typeof e[t]=="string"||typeof e[t]=="number"||typeof e[t]=="boolean"||a.isDate(e[t])||e[t]===null)&&o.push(t)}),o=f.intersection(o,r),o.length>0?t(null,i.indexes[o[0]].getMatching
(e[o[0]])):(o=[],Object.keys(e).forEach(function(t){e[t]&&e[t].hasOwnProperty("$in")&&o.push(t)}),o=f.intersection(o,r),o.length>0?t(null,i.indexes[o[0]].getMatching(e[o[0]].$in)):(o=[],Object.keys(e).forEach(function(t){e[t]&&(e[t].hasOwnProperty("$lt")||e
[t].hasOwnProperty("$lte")||e[t].hasOwnProperty("$gt")||e[t].hasOwnProperty("$gte"))&&o.push(t)}),o=f.intersection(o,r),o.length>0?t(null,i.indexes[o[0]].getBetweenBounds(e[o[0]])):t(null,i.getAllData())))},function(e){if(t)return n(null,e);var r=[],o=[],u=
Object.keys(i.ttlIndexes);e.forEach(function(e){var t=!0;u.forEach(function(n){e[n]!==undefined&&a.isDate(e[n])&&Date.now()>e[n].getTime()+i.ttlIndexes[n]*1e3&&(t=!1)}),t?o.push(e):r.push(e._id)}),s.eachSeries(r,function(e,t){i._remove({_id:e},{},function(e
){return e?n(e):t()})},function(e){return n(null,o)})}])},h.prototype._insert=function(e,t){var n=t||function(){},r;try{r=this.prepareDocumentForInsertion(e),this._insertInCache(r)}catch(s){return n(s)}this.persistence.persistNewState(a.isArray(r)?r:[r],function(
e){return e?n(e):n(null,i.deepCopy(r))})},h.prototype.createNewId=function(){var e=r.uid(16);return this.indexes._id.getMatching(e).length>0&&(e=this.createNewId()),e},h.prototype.prepareDocumentForInsertion=function(e){var t,n=this;if(a.isArray(e))t=[],e.forEach
(function(e){t.push(n.prepareDocumentForInsertion(e))});else{t=i.deepCopy(e),t._id===undefined&&(t._id=this.createNewId());var r=new Date;this.timestampData&&t.createdAt===undefined&&(t.createdAt=r),this.timestampData&&t.updatedAt===undefined&&(t.updatedAt=
r),i.checkObject(t)}return t},h.prototype._insertInCache=function(e){a.isArray(e)?this._insertMultipleDocsInCache(e):this.addToIndexes(e)},h.prototype._insertMultipleDocsInCache=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.addToIndexes(e[t])}catch(
i){r=i,n=t;break}if(r){for(t=0;t<n;t+=1)this.removeFromIndexes(e[t]);throw r}},h.prototype.insert=function(){this.executor.push({"this":this,fn:this._insert,arguments:arguments})},h.prototype.count=function(e,t){var n=new c(this,e,function(e,t,n){return e?n
(e):n(null,t.length)});if(typeof t!="function")return n;n.exec(t)},h.prototype.find=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:typeof t=="function"&&(n=t,t={})}var r=new c(this,e,function(e,t,n){var r=[],s;if(e)return n(e);for(s=0;s<t
.length;s+=1)r.push(i.deepCopy(t[s]));return n(null,r)});r.projection(t);if(typeof n!="function")return r;r.exec(n)},h.prototype.findOne=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:typeof t=="function"&&(n=t,t={})}var r=new c(this,e,function(
e,t,n){return e?n(e):t.length===1?n(null,i.deepCopy(t[0])):n(null,null)});r.projection(t).limit(1);if(typeof n!="function")return r;r.exec(n)},h.prototype._update=function(e,t,n,r){var o,u=this,a=0,l,h,p;typeof n=="function"&&(r=n,n={}),o=r||function(){},l=
n.multi!==undefined?n.multi:!1,h=n.upsert!==undefined?n.upsert:!1,s.waterfall([function(n){if(!h)return n();var r=new c(u,e);r.limit(1)._exec(function(r,s){if(r)return o(r);if(s.length===1)return n();var a;try{i.checkObject(t),a=t}catch(f){try{a=i.modify(i.
deepCopy(e,!0),t)}catch(r){return o(r)}}return u._insert(a,function(e,t){return e?o(e):o(null,1,t,!0)})})},function(){var r,s=[],c;u.getCandidates(e,function(h,d){if(h)return o(h);try{for(p=0;p<d.length;p+=1)i.match(d[p],e)&&(l||a===0)&&(a+=1,u.timestampData&&
(c=d[p].createdAt),r=i.modify(d[p],t),u.timestampData&&(r.createdAt=c,r.updatedAt=new Date),s.push({oldDoc:d[p],newDoc:r}))}catch(h){return o(h)}try{u.updateIndexes(s)}catch(h){return o(h)}var v=f.pluck(s,"newDoc");u.persistence.persistNewState(v,function(e
){if(e)return o(e);if(!n.returnUpdatedDocs)return o(null,a);var t=[];return v.forEach(function(e){t.push(i.deepCopy(e))}),l||(t=t[0]),o(null,a,t)})})}])},h.prototype.update=function(){this.executor.push({"this":this,fn:this._update,arguments:arguments})},h.
prototype._remove=function(e,t,n){var r,s=this,o=0,u=[],a;typeof t=="function"&&(n=t,t={}),r=n||function(){},a=t.multi!==undefined?t.multi:!1,this.getCandidates(e,!0,function(t,n){if(t)return r(t);try{n.forEach(function(t){i.match(t,e)&&(a||o===0)&&(o+=1,u.
push({$$deleted:!0,_id:t._id}),s.removeFromIndexes(t))})}catch(t){return r(t)}s.persistence.persistNewState(u,function(e){return e?r(e):r(null,o)})})},h.prototype.remove=function(){this.executor.push({"this":this,fn:this._remove,arguments:arguments})},t.exports=
h},{"./cursor":5,"./customUtils":6,"./executor":8,"./indexes":9,"./model":10,"./persistence":11,async:13,events:1,underscore:19,util:3}],8:[function(e,t,n){function s(){this.buffer=[],this.ready=!1,this.queue=i.queue(function(e,t){var n=[];for(var i=0;i<e.arguments
.length;i+=1)n.push(e.arguments[i]);var s=e.arguments[e.arguments.length-1];typeof s=="function"?n[n.length-1]=function(){typeof setImmediate=="function"?setImmediate(t):r.nextTick(t),s.apply(null,arguments)}:!s&&e.arguments.length!==0?n[n.length-1]=function(
){t()}:n.push(function(){t()}),e.fn.apply(e.this,n)},1)}var r=e("__browserify_process"),i=e("async");s.prototype.push=function(e,t){this.ready||t?this.queue.push(e):this.buffer.push(e)},s.prototype.processBuffer=function(){var e;this.ready=!0;for(e=0;e<this
.buffer.length;e+=1)this.queue.push(this.buffer[e]);this.buffer=[]},t.exports=s},{__browserify_process:4,async:13}],9:[function(e,t,n){function u(e,t){return e===t}function a(e){return e===null?"$null":typeof e=="string"?"$string"+e:typeof e=="boolean"?"$boolean"+
e:typeof e=="number"?"$number"+e:o.isArray(e)?"$date"+e.getTime():e}function f(e){this.fieldName=e.fieldName,this.unique=e.unique||!1,this.sparse=e.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:i.compareThings,checkValueEquality:u},this.reset(
)}var r=e("binary-search-tree").AVLTree,i=e("./model"),s=e("underscore"),o=e("util");f.prototype.reset=function(e){this.tree=new r(this.treeOptions),e&&this.insert(e)},f.prototype.insert=function(e){var t,n=this,r,u,f,l;if(o.isArray(e)){this.insertMultipleDocs
(e);return}t=i.getDotValue(e,this.fieldName);if(t===undefined&&this.sparse)return;if(!o.isArray(t))this.tree.insert(t,e);else{r=s.uniq(t,a);for(u=0;u<r.length;u+=1)try{this.tree.insert(r[u],e)}catch(c){l=c,f=u;break}if(l){for(u=0;u<f;u+=1)this.tree.delete(r
[u],e);throw l}}},f.prototype.insertMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.insert(e[t])}catch(i){n=i,r=t;break}if(n){for(t=0;t<r;t+=1)this.remove(e[t]);throw n}},f.prototype.remove=function(e){var t,n=this;if(o.isArray(e)){e.forEach
(function(e){n.remove(e)});return}t=i.getDotValue(e,this.fieldName);if(t===undefined&&this.sparse)return;o.isArray(t)?s.uniq(t,a).forEach(function(t){n.tree.delete(t,e)}):this.tree.delete(t,e)},f.prototype.update=function(e,t){if(o.isArray(e)){this.updateMultipleDocs
(e);return}this.remove(e);try{this.insert(t)}catch(n){throw this.insert(e),n}},f.prototype.updateMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)this.remove(e[t].oldDoc);for(t=0;t<e.length;t+=1)try{this.insert(e[t].newDoc)}catch(i){r=i,n=t;break}
if(r){for(t=0;t<n;t+=1)this.remove(e[t].newDoc);for(t=0;t<e.length;t+=1)this.insert(e[t].oldDoc);throw r}},f.prototype.revertUpdate=function(e,t){var n=[];o.isArray(e)?(e.forEach(function(e){n.push({oldDoc:e.newDoc,newDoc:e.oldDoc})}),this.update(n)):this.update
(t,e)},f.prototype.getMatching=function(e){var t=this;if(!o.isArray(e))return t.tree.search(e);var n={},r=[];return e.forEach(function(e){t.getMatching(e).forEach(function(e){n[e._id]=e})}),Object.keys(n).forEach(function(e){r.push(n[e])}),r},f.prototype.getBetweenBounds=
function(e){return this.tree.betweenBounds(e)},f.prototype.getAll=function(){var e=[];return this.tree.executeOnEveryNode(function(t){var n;for(n=0;n<t.data.length;n+=1)e.push(t.data[n])}),e},t.exports=f},{"./model":10,"binary-search-tree":14,underscore:19,
util:3}],10:[function(e,t,n){function l(e,t){typeof e=="number"&&(e=e.toString());if(!(e[0]!=="$"||e==="$$date"&&typeof t=="number"||e==="$$deleted"&&t===!0||e==="$$indexCreated"||e==="$$indexRemoved"))throw new Error("Field names cannot begin with the $ character"
);if(e.indexOf(".")!==-1)throw new Error("Field names cannot contain a .")}function c(e){r.isArray(e)&&e.forEach(function(e){c(e)}),typeof e=="object"&&e!==null&&Object.keys(e).forEach(function(t){l(t,e[t]),c(e[t])})}function h(e){var t;return t=JSON.stringify
(e,function(e,t){return l(e,t),t===undefined?undefined:t===null?null:typeof this[e].getTime=="function"?{$$date:this[e].getTime()}:t}),t}function p(e){return JSON.parse(e,function(e,t){return e==="$$date"?new Date(t):typeof t=="string"||typeof t=="number"||typeof 
t=="boolean"||t===null?t:t&&t.$$date?t.$$date:t})}function d(e,t){var n;return typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e===null||r.isDate(e)?e:r.isArray(e)?(n=[],e.forEach(function(e){n.push(d(e,t))}),n):typeof e=="object"?(n={},Object.
keys(e).forEach(function(r){if(!t||r[0]!=="$"&&r.indexOf(".")===-1)n[r]=d(e[r],t)}),n):undefined}function v(e){return typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e===null||r.isDate(e)||r.isArray(e)}function m(e,t){return e<t?-1:e>t?1:0}function g
(e,t){var n,r;for(n=0;n<Math.min(e.length,t.length);n+=1){r=y(e[n],t[n]);if(r!==0)return r}return m(e.length,t.length)}function y(e,t,n){var i,s,o,u,a=n||m;if(e===undefined)return t===undefined?0:-1;if(t===undefined)return e===undefined?0:1;if(e===null)return t===
null?0:-1;if(t===null)return e===null?0:1;if(typeof e=="number")return typeof t=="number"?m(e,t):-1;if(typeof t=="number")return typeof e=="number"?m(e,t):1;if(typeof e=="string")return typeof t=="string"?a(e,t):-1;if(typeof t=="string")return typeof e=="string"?
a(e,t):1;if(typeof e=="boolean")return typeof t=="boolean"?m(e,t):-1;if(typeof t=="boolean")return typeof e=="boolean"?m(e,t):1;if(r.isDate(e))return r.isDate(t)?m(e.getTime(),t.getTime()):-1;if(r.isDate(t))return r.isDate(e)?m(e.getTime(),t.getTime()):1;if(
r.isArray(e))return r.isArray(t)?g(e,t):-1;if(r.isArray(t))return r.isArray(e)?g(e,t):1;i=Object.keys(e).sort(),s=Object.keys(t).sort();for(u=0;u<Math.min(i.length,s.length);u+=1){o=y(e[i[u]],t[s[u]]);if(o!==0)return o}return m(i.length,s.length)}function b
(e){return function(t,n,r){var i=typeof n=="string"?n.split("."):n;if(i.length===1)o[e](t,n,r);else{if(t[i[0]]===undefined){if(e==="$unset")return;t[i[0]]={}}s[e](t[i[0]],i.slice(1),r)}}}function w(e,t){var n=Object.keys(t),r=i.map(n,function(e){return e[0]
}),o=i.filter(r,function(e){return e==="$"}),u,a;if(n.indexOf("_id")!==-1&&t._id!==e._id)throw new Error("You cannot change a document's _id");if(o.length!==0&&o.length!==r.length)throw new Error("You cannot mix modifiers and normal fields");o.length===0?(u=
d(t),u._id=e._id):(a=i.uniq(n),u=d(e),a.forEach(function(e){var n;if(!s[e])throw new Error("Unknown modifier "+e);if(typeof t[e]!="object")throw new Error("Modifier "+e+"'s argument must be an object");n=Object.keys(t[e]),n.forEach(function(n){s[e](u,n,t[e]
[n])})})),c(u);if(e._id!==u._id)throw new Error("You can't change a document's _id");return u}function E(e,t){var n=typeof t=="string"?t.split("."):t,i,s;if(!e)return undefined;if(n.length===0)return e;if(n.length===1)return e[n[0]];if(r.isArray(e[n[0]])){i=
parseInt(n[1],10);if(typeof i=="number"&&!isNaN(i))return E(e[n[0]][i],n.slice(2));s=new Array;for(i=0;i<e[n[0]].length;i+=1)s.push(E(e[n[0]][i],n.slice(1)));return s}return E(e[n[0]],n.slice(1))}function S(e,t){var n,i,s;if(e===null||typeof e=="string"||typeof 
e=="boolean"||typeof e=="number"||t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")return e===t;if(r.isDate(e)||r.isDate(t))return r.isDate(e)&&r.isDate(t)&&e.getTime()===t.getTime();if((!r.isArray(e)||!r.isArray(t))&&(r.isArray(e)||r.isArray
(t))||e===undefined||t===undefined)return!1;try{n=Object.keys(e),i=Object.keys(t)}catch(o){return!1}if(n.length!==i.length)return!1;for(s=0;s<n.length;s+=1){if(i.indexOf(n[s])===-1)return!1;if(!S(e[n[s]],t[n[s]]))return!1}return!0}function x(e,t){return typeof 
e!="string"&&typeof e!="number"&&!r.isDate(e)&&typeof t!="string"&&typeof t!="number"&&!r.isDate(t)?!1:typeof e!=typeof t?!1:!0}function T(e,t){var n,r,i,s;if(v(e)||v(t))return N({needAKey:e},"needAKey",t);n=Object.keys(t);for(s=0;s<n.length;s+=1){r=n[s],i=
t[r];if(r[0]==="$"){if(!a[r])throw new Error("Unknown logical operator "+r);if(!a[r](e,i))return!1}else if(!N(e,r,i))return!1}return!0}function N(e,t,n,s){var o=E(e,t),a,l,c,h;if(r.isArray(o)&&!s){if(r.isArray(n))return N(e,t,n,!0);if(n!==null&&typeof n=="object"&&!
r.isRegExp(n)){l=Object.keys(n);for(a=0;a<l.length;a+=1)if(f[l[a]])return N(e,t,n,!0)}for(a=0;a<o.length;a+=1)if(N({k:o[a]},"k",n))return!0;return!1}if(n!==null&&typeof n=="object"&&!r.isRegExp(n)&&!r.isArray(n)){l=Object.keys(n),c=i.map(l,function(e){return e
[0]}),h=i.filter(c,function(e){return e==="$"});if(h.length!==0&&h.length!==c.length)throw new Error("You cannot mix operators and normal fields");if(h.length>0){for(a=0;a<l.length;a+=1){if(!u[l[a]])throw new Error("Unknown comparison function "+l[a]);if(!u
[l[a]](o,n[l[a]]))return!1}return!0}}return r.isRegExp(n)?u.$regex(o,n):S(o,n)?!0:!1}var r=e("util"),i=e("underscore"),s={},o={},u={},a={},f={};o.$set=function(e,t,n){e[t]=n},o.$unset=function(e,t,n){delete e[t]},o.$push=function(e,t,n){e.hasOwnProperty(t)||
(e[t]=[]);if(!r.isArray(e[t]))throw new Error("Can't $push an element on non-array values");n!==null&&typeof n=="object"&&n.$slice&&n.$each===undefined&&(n.$each=[]);if(n!==null&&typeof n=="object"&&n.$each){if(Object.keys(n).length>=3||Object.keys(n).length===2&&
n.$slice===undefined)throw new Error("Can only use $slice in cunjunction with $each when $push to array");if(!r.isArray(n.$each))throw new Error("$each requires an array value");n.$each.forEach(function(n){e[t].push(n)});if(n.$slice===undefined||typeof n.$slice!="number"
)return;if(n.$slice===0)e[t]=[];else{var i,s,o=e[t].length;n.$slice<0?(i=Math.max(0,o+n.$slice),s=o):n.$slice>0&&(i=0,s=Math.min(o,n.$slice)),e[t]=e[t].slice(i,s)}}else e[t].push(n)},o.$addToSet=function(e,t,n){var i=!0;e.hasOwnProperty(t)||(e[t]=[]);if(!r.
isArray(e[t]))throw new Error("Can't $addToSet an element on non-array values");if(n!==null&&typeof n=="object"&&n.$each){if(Object.keys(n).length>1)throw new Error("Can't use another field in conjunction with $each");if(!r.isArray(n.$each))throw new Error("$each requires an array value"
);n.$each.forEach(function(n){o.$addToSet(e,t,n)})}else e[t].forEach(function(e){y(e,n)===0&&(i=!1)}),i&&e[t].push(n)},o.$pop=function(e,t,n){if(!r.isArray(e[t]))throw new Error("Can't $pop an element from non-array values");if(typeof n!="number")throw new 
Error(n+" isn't an integer, can't use it with $pop");if(n===0)return;n>0?e[t]=e[t].slice(0,e[t].length-1):e[t]=e[t].slice(1)},o.$pull=function(e,t,n){var i,s;if(!r.isArray(e[t]))throw new Error("Can't $pull an element from non-array values");i=e[t];for(s=i.
length-1;s>=0;s-=1)T(i[s],n)&&i.splice(s,1)},o.$inc=function(e,t,n){if(typeof n!="number")throw new Error(n+" must be a number");if(typeof e[t]!="number"){if(!!i.has(e,t))throw new Error("Don't use the $inc modifier on non-number fields");e[t]=n}else e[t]+=
n},o.$max=function(e,t,n){typeof e[t]=="undefined"?e[t]=n:n>e[t]&&(e[t]=n)},o.$min=function(e,t,n){typeof e[t]=="undefined"?e[t]=n:n<e[t]&&(e[t]=n)},Object.keys(o).forEach(function(e){s[e]=b(e)}),u.$lt=function(e,t){return x(e,t)&&e<t},u.$lte=function(e,t){
return x(e,t)&&e<=t},u.$gt=function(e,t){return x(e,t)&&e>t},u.$gte=function(e,t){return x(e,t)&&e>=t},u.$ne=function(e,t){return e===undefined?!0:!S(e,t)},u.$in=function(e,t){var n;if(!r.isArray(t))throw new Error("$in operator called with a non-array");for(
n=0;n<t.length;n+=1)if(S(e,t[n]))return!0;return!1},u.$nin=function(e,t){if(!r.isArray(t))throw new Error("$nin operator called with a non-array");return!u.$in(e,t)},u.$regex=function(e,t){if(!r.isRegExp(t))throw new Error("$regex operator called with non regular expression"
);return typeof e!="string"?!1:t.test(e)},u.$exists=function(e,t){return t||t===""?t=!0:t=!1,e===undefined?!t:t},u.$size=function(e,t){if(!r.isArray(e))return!1;if(t%1!==0)throw new Error("$size operator called without an integer");return e.length==t},u.$elemMatch=
function(e,t){if(!r.isArray(e))return!1;var n=e.length,i=!1;while(n--)if(T(e[n],t)){i=!0;break}return i},f.$size=!0,f.$elemMatch=!0,a.$or=function(e,t){var n;if(!r.isArray(t))throw new Error("$or operator used without an array");for(n=0;n<t.length;n+=1)if(T
(e,t[n]))return!0;return!1},a.$and=function(e,t){var n;if(!r.isArray(t))throw new Error("$and operator used without an array");for(n=0;n<t.length;n+=1)if(!T(e,t[n]))return!1;return!0},a.$not=function(e,t){return!T(e,t)},a.$where=function(e,t){var n;if(!i.isFunction
(t))throw new Error("$where operator used without a function");n=t.call(e);if(!i.isBoolean(n))throw new Error("$where function must return boolean");return n},t.exports.serialize=h,t.exports.deserialize=p,t.exports.deepCopy=d,t.exports.checkObject=c,t.exports
.isPrimitiveType=v,t.exports.modify=w,t.exports.getDotValue=E,t.exports.match=T,t.exports.areThingsEqual=S,t.exports.compareThings=y},{underscore:19,util:3}],11:[function(t,n,r){function c(e){var t,n,r;this.db=e.db,this.inMemoryOnly=this.db.inMemoryOnly,this
.filename=this.db.filename,this.corruptAlertThreshold=e.corruptAlertThreshold!==undefined?e.corruptAlertThreshold:.1;if(!this.inMemoryOnly&&this.filename&&this.filename.charAt(this.filename.length-1)==="~")throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files"
);if(e.afterSerialization&&!e.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!e.afterSerialization&&e.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss"
);this.afterSerialization=e.afterSerialization||function(e){return e},this.beforeDeserialization=e.beforeDeserialization||function(e){return e};for(t=1;t<30;t+=1)for(n=0;n<10;n+=1){r=f.uid(t);if(this.beforeDeserialization(this.afterSerialization(r))!==r)throw new 
Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss")}this.filename&&e.nodeWebkitAppName&&(console.log("=================================================================="),console.log
("WARNING: The nodeWebkitAppName option is deprecated"),console.log("To get the path to the directory where Node Webkit stores the data"),console.log("for your app, use the internal nw.gui module like this"),console.log("require('nw.gui').App.dataPath"),console
.log("See https://github.com/rogerwang/node-webkit/issues/500"),console.log("=================================================================="),this.filename=c.getNWAppFilename(e.nodeWebkitAppName,this.filename))}var i=t("__browserify_process"),s=e.storage=
e.storage||t("./storage"),o=t("path"),u=t("./model"),a=t("async"),f=t("./customUtils"),l=t("./indexes");c.ensureDirectoryExists=function(e,t){var n=t||function(){};s.mkdirp(e,function(e){return n(e)})},c.getNWAppFilename=function(e,t){var n;switch(i.platform
){case"win32":case"win64":n=i.env.LOCALAPPDATA||i.env.APPDATA;if(!n)throw new Error("Couldn't find the base application data folder");n=o.join(n,e);break;case"darwin":n=i.env.HOME;if(!n)throw new Error("Couldn't find the base application data directory");n=
o.join(n,"Library","Application Support",e);break;case"linux":n=i.env.HOME;if(!n)throw new Error("Couldn't find the base application data directory");n=o.join(n,".config",e);break;default:throw new Error("Can't use the Node Webkit relative path for platform "+
i.platform)}return o.join(n,"nedb-data",t)},c.prototype.persistCachedDatabase=function(e){var t=e||function(){},n="",r=this;if(this.inMemoryOnly)return t(null);this.db.getAllData().forEach(function(e){n+=r.afterSerialization(u.serialize(e))+"\n"}),Object.keys
(this.db.indexes).forEach(function(e){e!="_id"&&(n+=r.afterSerialization(u.serialize({$$indexCreated:{fieldName:e,unique:r.db.indexes[e].unique,sparse:r.db.indexes[e].sparse}}))+"\n")}),s.crashSafeWriteFile(this.filename,n,function(e){return e?t(e):(r.db.emit
("compaction.done"),t(null))})},c.prototype.compactDatafile=function(){this.db.executor.push({"this":this,fn:this.persistCachedDatabase,arguments:[]})},c.prototype.setAutocompactionInterval=function(e){var t=this,n=5e3,r=Math.max(e||0,n);this.stopAutocompaction
(),this.autocompactionIntervalId=setInterval(function(){t.compactDatafile()},r)},c.prototype.stopAutocompaction=function(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)},c.prototype.persistNewState=function(e,t){var n=this,r=""
,i=t||function(){};if(n.inMemoryOnly)return i(null);e.forEach(function(e){r+=n.afterSerialization(u.serialize(e))+"\n"});if(r.length===0)return i(null);s.appendFile(n.filename,r,"utf8",function(e){return i(e)})},c.prototype.treatRawData=function(e){var t=e.
split("\n"),n={},r=[],i,s={},o=-1;for(i=0;i<t.length;i+=1){var a;try{a=u.deserialize(this.beforeDeserialization(t[i])),a._id?a.$$deleted===!0?delete n[a._id]:n[a._id]=a:a.$$indexCreated&&a.$$indexCreated.fieldName!=undefined?s[a.$$indexCreated.fieldName]=a.
$$indexCreated:typeof a.$$indexRemoved=="string"&&delete s[a.$$indexRemoved]}catch(f){o+=1}}if(t.length>0&&o/t.length>this.corruptAlertThreshold)throw new Error("More than "+Math.floor(100*this.corruptAlertThreshold)+"% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start NeDB to prevent dataloss"
);return Object.keys(n).forEach(function(e){r.push(n[e])}),{data:r,indexes:s}},c.prototype.loadDatabase=function(e){var t=e||function(){},n=this;n.db.resetIndexes();if(n.inMemoryOnly)return t(null);a.waterfall([function(e){c.ensureDirectoryExists(o.dirname(
n.filename),function(t){s.ensureDatafileIntegrity(n.filename,function(t){s.readFile(n.filename,"utf8",function(t,r){if(t)return e(t);try{var i=n.treatRawData(r)}catch(s){return e(s)}Object.keys(i.indexes).forEach(function(e){n.db.indexes[e]=new l(i.indexes[
e])});try{n.db.resetIndexes(i.data)}catch(s){return n.db.resetIndexes(),e(s)}n.db.persistence.persistCachedDatabase(e)})})})}],function(e){return e?t(e):(n.db.executor.processBuffer(),t(null))})},n.exports=c},{"./customUtils":6,"./indexes":9,"./model":10,"./storage"
:12,__browserify_process:4,async:13,path:2}],12:[function(e,t,n){function i(e,t){r.getItem(e,function(e,n){return n!==null?t(!0):t(!1)})}function s(e,t,n){r.getItem(e,function(i,s){s===null?r.removeItem(t,function(){return n()}):r.setItem(t,s,function(){r.removeItem
(e,function(){return n()})})})}function o(e,t,n,i){typeof n=="function"&&(i=n),r.setItem(e,t,function(){return i()})}function u(e,t,n,i){typeof n=="function"&&(i=n),r.getItem(e,function(n,s){s=s||"",s+=t,r.setItem(e,s,function(){return i()})})}function a(e,
t,n){typeof t=="function"&&(n=t),r.getItem(e,function(e,t){return n(null,t||"")})}function f(e,t){r.removeItem(e,function(){return t()})}function l(e,t){return t()}function c(e,t){return t(null)}var r=e("localforage");r.config({name:"NeDB",storeName:"nedbdata"
}),t.exports.exists=i,t.exports.rename=s,t.exports.writeFile=o,t.exports.crashSafeWriteFile=o,t.exports.appendFile=u,t.exports.readFile=a,t.exports.unlink=f,t.exports.mkdirp=l,t.exports.ensureDatafileIntegrity=c},{localforage:18}],13:[function(e,n,r){var i=
e("__browserify_process");(function(){function o(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(r,arguments)}}var e={},r,s;r=this,r!=null&&(s=r.async),e.noConflict=function(){return r.async=s,e};var u=function(
e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},a=function(e,t){if(e.map)return e.map(t);var n=[];return u(e,function(e,r,i){n.push(t(e,r,i))}),n},f=function(e,t,n){return e.reduce?e.reduce(t,n):(u(e,function(e,r,i){n=t(n,e,r,
i)}),n)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof i=="undefined"||!i.nextTick?typeof setImmediate=="function"?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick
):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick):(e.nextTick=i.nextTick,typeof setImmediate!="undefined"?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick),e.each=function(e,t,n){n=n||function(){};if(!e.length)return n
();var r=0;u(e,function(i){t(i,o(function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length&&n(null))}))})},e.forEach=e.each,e.eachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1
,r>=e.length?n(null):i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,t,n,r){var i=c(t);i.apply(null,[e,n,r])},e.forEachLimit=e.eachLimit;var c=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0)return r();var i=0,s=0,o=0
;(function u(){if(i>=t.length)return r();while(o<e&&s<t.length)s+=1,o+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=t.length?r():u())})})()}},h=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.
each].concat(n))}},p=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[c(e)].concat(n))}},d=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(n)
)}},v=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};e.map=h(v),e.mapSeries=d(v),e.mapLimit=function(e,t,n,r){return m(t)(e,n,r)};var m=function(e
){return p(e,v)};e.reduce=function(t,n,r,i){e.eachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,i){var s=a(t,function(e){return e}).reverse();e.reduce(s,n,r,i)},e
.foldr=e.reduceRight;var g=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.
filter=h(g),e.filterSeries=d(g),e.select=e.filter,e.selectSeries=e.filterSeries;var y=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(a(i.sort(function(e,t){return e
.index-t.index}),function(e){return e.value}))})};e.reject=h(y),e.rejectSeries=d(y);var b=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};e.detect=h(b),e.detectSeries=d(b),e.some=function(t,n,r){e.each(t
,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map
(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,a(t.sort(n),function(e){return e.value}))})},e.auto=function(t,n){n=n||function(
){};var r=l(t);if(!r.length)return n(null);var i={},s=[],o=function(e){s.unshift(e)},a=function(e){for(var t=0;t<s.length;t+=1)if(s[t]===e){s.splice(t,1);return}},c=function(){u(s.slice(0),function(e){e()})};o(function(){l(i).length===r.length&&(n(null,i),n=
function(){})}),u(r,function(r){var s=t[r]instanceof Function?[t[r]]:t[r],h=function(t){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]);if(t){var o={};u(l(i),function(e){o[e]=i[e]}),o[r]=s,n(t,o),n=function(){}}else i[r]=s,e.setImmediate
(c)},p=s.slice(0,Math.abs(s.length-1))||[],d=function(){return f(p,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(r)};if(d())s[s.length-1](h,i);else{var v=function(){d()&&(a(v),s[s.length-1](h,i))};o(v)}})},e.waterfall=function(t,n){n=n||
function(){};if(t.constructor!==Array){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}if(!t.length)return n();var i=function(t){return function(r){if(r)n.apply(null,arguments),n=function(){};else{var s=Array.prototype
.slice.call(arguments,1),o=t.next();o?s.push(i(o)):s.push(n),e.setImmediate(function(){t.apply(null,s)})}}};i(e.iterator(t))()};var w=function(e,t,n){n=n||function(){};if(t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice
.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};e.parallel=function(t,n){w({map
:e.map,each:e.each},t,n)},e.parallelLimit=function(e,t,n){w({map:m(t),each:c(t)},e,n)},e.series=function(t,n){n=n||function(){};if(t.constructor===Array)e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&
(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.eachSeries(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(
){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype
.slice.call(arguments)))}};var E=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=h(E),e.concatSeries=d(E),e.whilst=function(t,n,r){t()?n(function(i){if(i)return r(i);e.whilst(t,n,r)}):r
()},e.doWhilst=function(t,n,r){t(function(i){if(i)return r(i);n()?e.doWhilst(t,n,r):r()})},e.until=function(t,n,r){t()?r():n(function(i){if(i)return r(i);e.until(t,n,r)})},e.doUntil=function(t,n,r){t(function(i){if(i)return r(i);n()?r():e.doUntil(t,n,r)})},
e.queue=function(t,n){function r(t,r,i,s){r.constructor!==Array&&(r=[r]),u(r,function(r){var o={data:r,callback:typeof s=="function"?s:null};i?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===n&&t.saturated(),e.setImmediate(t.process)})}n===
undefined&&(n=1);var i=0,s={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(e,t){r(s,e,!1,t)},unshift:function(e,t){r(s,e,!0,t)},process:function(){if(i<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&s.tasks.length===0&&
s.empty(),i+=1;var n=function(){i-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+i===0&&s.drain(),s.process()},r=o(n);t(e.data,r)}},length:function(){return s.tasks.length},running:function(){return i}};return s},e.cargo=function(t,n){
var r=!1,i=[],s={tasks:i,payload:n,saturated:null,empty:null,drain:null,push:function(t,r){t.constructor!==Array&&(t=[t]),u(t,function(e){i.push({data:e,callback:typeof r=="function"?r:null}),s.saturated&&i.length===n&&s.saturated()}),e.setImmediate(s.process
)},process:function o(){if(r)return;if(i.length===0){s.drain&&s.drain();return}var e=typeof n=="number"?i.splice(0,n):i.splice(0),f=a(e,function(e){return e.data});s.empty&&s.empty(),r=!0,t(f,function(){r=!1;var t=arguments;u(e,function(e){e.callback&&e.callback
.apply(null,t)}),o()})},length:function(){return i.length},running:function(){return r}};return s};var S=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments
,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&u(n,function(t){console[e](t)}))}]))}};e.log=S("log"),e.dir=S("dir"),e.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice
.call(arguments),s=i.pop(),o=t.apply(null,i);o in n?s.apply(null,n[o]):o in r?r[o].push(s):(r[o]=[s],e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=
e,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.map(i,n,r)},e.timesSeries=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.
mapSeries(i,n,r)},e.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(t,r,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype
.slice.call(arguments,1);r(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}};var x=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=
Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};e.applyEach=h(x),e.applyEachSeries=d(x),e.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},typeof t!="undefined"&&t.amd?t([],function(){return e}):typeof n!="undefined"&&
n.exports?n.exports=e:r.async=e})()},{__browserify_process:4}],14:[function(e,t,n){t.exports.BinarySearchTree=e("./lib/bst"),t.exports.AVLTree=e("./lib/avltree")},{"./lib/avltree":15,"./lib/bst":16}],15:[function(e,t,n){function u(e){this.tree=new a(e)}function a
(e){e=e||{},this.left=null,this.right=null,this.parent=e.parent!==undefined?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||i.defaultCompareKeysFunction
,this.checkValueEquality=e.checkValueEquality||i.defaultCheckValueEquality}var r=e("./bst"),i=e("./customUtils"),s=e("util"),o=e("underscore");s.inherits(a,r),u._AVLTree=a,a.prototype.checkHeightCorrect=function(){var e,t;if(!this.hasOwnProperty("key"))return;
if(this.left&&this.left.height===undefined)throw new Error("Undefined height for node "+this.left.key);if(this.right&&this.right.height===undefined)throw new Error("Undefined height for node "+this.right.key);if(this.height===undefined)throw new Error("Undefined height for node "+
this.key);e=this.left?this.left.height:0,t=this.right?this.right.height:0;if(this.height!==1+Math.max(e,t))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()},
a.prototype.balanceFactor=function(){var e=this.left?this.left.height:0,t=this.right?this.right.height:0;return e-t},a.prototype.checkBalanceFactors=function(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.
left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()},a.prototype.checkIsAVLT=function(){a.super_.prototype.checkIsBST.call(this),this.checkHeightCorrect(),this.checkBalanceFactors()},u.prototype.checkIsAVLT=function(){this.tree
.checkIsAVLT()},a.prototype.rightRotation=function(){var e=this,t=this.left,n,r,i,s;return t?(n=t.right,e.parent?(t.parent=e.parent,e.parent.left===e?e.parent.left=t:e.parent.right=t):t.parent=null,t.right=e,e.parent=t,e.left=n,n&&(n.parent=e),r=t.left?t.left
.height:0,i=n?n.height:0,s=e.right?e.right.height:0,e.height=Math.max(i,s)+1,t.height=Math.max(r,e.height)+1,t):this},a.prototype.leftRotation=function(){var e=this,t=this.right,n,r,i,s;return t?(n=t.left,e.parent?(t.parent=e.parent,e.parent.left===e?e.parent
.left=t:e.parent.right=t):t.parent=null,t.left=e,e.parent=t,e.right=n,n&&(n.parent=e),r=e.left?e.left.height:0,i=n?n.height:0,s=t.right?t.right.height:0,e.height=Math.max(r,i)+1,t.height=Math.max(s,e.height)+1,t):this},a.prototype.rightTooSmall=function(){return this
.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())},a.prototype.leftTooSmall=function(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())},a
.prototype.rebalanceAlongPath=function(e){var t=this,n,r;if(!this.hasOwnProperty("key"))return delete this.height,this;for(r=e.length-1;r>=0;r-=1)e[r].height=1+Math.max(e[r].left?e[r].left.height:0,e[r].right?e[r].right.height:0),e[r].balanceFactor()>1&&(n=
e[r].rightTooSmall(),r===0&&(t=n)),e[r].balanceFactor()<-1&&(n=e[r].leftTooSmall(),r===0&&(t=n));return t},a.prototype.insert=function(e,t){var n=[],r=this;if(!this.hasOwnProperty("key"))return this.key=e,this.data.push(t),this.height=1,this;for(;;){if(r.compareKeys
(r.key,e)===0){if(r.unique){var i=new Error("Can't insert key "+e+", it violates the unique constraint");throw i.key=e,i.errorType="uniqueViolated",i}return r.data.push(t),this}n.push(r);if(r.compareKeys(e,r.key)<0){if(!r.left){n.push(r.createLeftChild({key
:e,value:t}));break}r=r.left}else{if(!r.right){n.push(r.createRightChild({key:e,value:t}));break}r=r.right}}return this.rebalanceAlongPath(n)},u.prototype.insert=function(e,t){var n=this.tree.insert(e,t);n&&(this.tree=n)},a.prototype.delete=function(e,t){var n=
[],r,i=this,s=this,o=[];if(!this.hasOwnProperty("key"))return this;for(;;){if(s.compareKeys(e,s.key)===0)break;o.push(s);if(s.compareKeys(e,s.key)<0){if(!s.left)return this;s=s.left}else{if(!s.right)return this;s=s.right}}if(s.data.length>1&&t)return s.data
.forEach(function(e){s.checkValueEquality(e,t)||n.push(e)}),s.data=n,this;if(!s.left&&!s.right)return s===this?(delete s.key,s.data=[],delete s.height,this):(s.parent.left===s?s.parent.left=null:s.parent.right=null,this.rebalanceAlongPath(o));if(!s.left||!s
.right)return r=s.left?s.left:s.right,s===this?(r.parent=null,r):(s.parent.left===s?(s.parent.left=r,r.parent=s.parent):(s.parent.right=r,r.parent=s.parent),this.rebalanceAlongPath(o));o.push(s),r=s.left;if(!r.right)return s.key=r.key,s.data=r.data,s.left=r
.left,r.left&&(r.left.parent=s),this.rebalanceAlongPath(o);for(;;){if(!r.right)break;o.push(r),r=r.right}return s.key=r.key,s.data=r.data,r.parent.right=r.left,r.left&&(r.left.parent=r.parent),this.rebalanceAlongPath(o)},u.prototype.delete=function(e,t){var n=
this.tree.delete(e,t);n&&(this.tree=n)},["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach(function(e){u.prototype[e]=function(){return this.tree[e].apply(this.tree,arguments)}}),t.exports=u},{"./bst":16,"./customUtils":17
,underscore:19,util:3}],16:[function(e,t,n){function i(e){e=e||{},this.left=null,this.right=null,this.parent=e.parent!==undefined?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1
,this.compareKeys=e.compareKeys||r.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||r.defaultCheckValueEquality}function s(e,t){var n;for(n=0;n<t.length;n+=1)e.push(t[n])}var r=e("./customUtils");i.prototype.getMaxKeyDescendant=function(
){return this.right?this.right.getMaxKeyDescendant():this},i.prototype.getMaxKey=function(){return this.getMaxKeyDescendant().key},i.prototype.getMinKeyDescendant=function(){return this.left?this.left.getMinKeyDescendant():this},i.prototype.getMinKey=function(
){return this.getMinKeyDescendant().key},i.prototype.checkAllNodesFullfillCondition=function(e){if(!this.hasOwnProperty("key"))return;e(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(e),this.right&&this.right.checkAllNodesFullfillCondition
(e)},i.prototype.checkNodeOrdering=function(){var e=this;if(!this.hasOwnProperty("key"))return;this.left&&(this.left.checkAllNodesFullfillCondition(function(t){if(e.compareKeys(t,e.key)>=0)throw new Error("Tree with root "+e.key+" is not a binary search tree"
)}),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition(function(t){if(e.compareKeys(t,e.key)<=0)throw new Error("Tree with root "+e.key+" is not a binary search tree")}),this.right.checkNodeOrdering())},i.prototype.checkInternalPointers=
function(){if(this.left){if(this.left.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.right
.checkInternalPointers()}},i.prototype.checkIsBST=function(){this.checkNodeOrdering(),this.checkInternalPointers();if(this.parent)throw new Error("The root shouldn't have a parent")},i.prototype.getNumberOfKeys=function(){var e;return this.hasOwnProperty("key"
)?(e=1,this.left&&(e+=this.left.getNumberOfKeys()),this.right&&(e+=this.right.getNumberOfKeys()),e):0},i.prototype.createSimilar=function(e){return e=e||{},e.unique=this.unique,e.compareKeys=this.compareKeys,e.checkValueEquality=this.checkValueEquality,new 
this.constructor(e)},i.prototype.createLeftChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.left=t,t},i.prototype.createRightChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.right=t,t},i.prototype.insert=function(
e,t){if(!this.hasOwnProperty("key")){this.key=e,this.data.push(t);return}if(this.compareKeys(this.key,e)===0){if(this.unique){var n=new Error("Can't insert key "+e+", it violates the unique constraint");throw n.key=e,n.errorType="uniqueViolated",n}this.data
.push(t);return}this.compareKeys(e,this.key)<0?this.left?this.left.insert(e,t):this.createLeftChild({key:e,value:t}):this.right?this.right.insert(e,t):this.createRightChild({key:e,value:t})},i.prototype.search=function(e){return this.hasOwnProperty("key")?this
.compareKeys(this.key,e)===0?this.data:this.compareKeys(e,this.key)<0?this.left?this.left.search(e):[]:this.right?this.right.search(e):[]:[]},i.prototype.getLowerBoundMatcher=function(e){var t=this;return!e.hasOwnProperty("$gt")&&!e.hasOwnProperty("$gte")?function(
){return!0}:e.hasOwnProperty("$gt")&&e.hasOwnProperty("$gte")?t.compareKeys(e.$gte,e.$gt)===0?function(n){return t.compareKeys(n,e.$gt)>0}:t.compareKeys(e.$gte,e.$gt)>0?function(n){return t.compareKeys(n,e.$gte)>=0}:function(n){return t.compareKeys(n,e.$gt)>0
}:e.hasOwnProperty("$gt")?function(n){return t.compareKeys(n,e.$gt)>0}:function(n){return t.compareKeys(n,e.$gte)>=0}},i.prototype.getUpperBoundMatcher=function(e){var t=this;return!e.hasOwnProperty("$lt")&&!e.hasOwnProperty("$lte")?function(){return!0}:e.hasOwnProperty
("$lt")&&e.hasOwnProperty("$lte")?t.compareKeys(e.$lte,e.$lt)===0?function(n){return t.compareKeys(n,e.$lt)<0}:t.compareKeys(e.$lte,e.$lt)<0?function(n){return t.compareKeys(n,e.$lte)<=0}:function(n){return t.compareKeys(n,e.$lt)<0}:e.hasOwnProperty("$lt")?
function(n){return t.compareKeys(n,e.$lt)<0}:function(n){return t.compareKeys(n,e.$lte)<=0}},i.prototype.betweenBounds=function(e,t,n){var r=[];return this.hasOwnProperty("key")?(t=t||this.getLowerBoundMatcher(e),n=n||this.getUpperBoundMatcher(e),t(this.key
)&&this.left&&s(r,this.left.betweenBounds(e,t,n)),t(this.key)&&n(this.key)&&s(r,this.data),n(this.key)&&this.right&&s(r,this.right.betweenBounds(e,t,n)),r):[]},i.prototype.deleteIfLeaf=function(){return this.left||this.right?!1:this.parent?(this.parent.left===
this?this.parent.left=null:this.parent.right=null,!0):(delete this.key,this.data=[],!0)},i.prototype.deleteIfOnlyOneChild=function(){var e;return this.left&&!this.right&&(e=this.left),!this.left&&this.right&&(e=this.right),e?this.parent?(this.parent.left===
this?(this.parent.left=e,e.parent=this.parent):(this.parent.right=e,e.parent=this.parent),!0):(this.key=e.key,this.data=e.data,this.left=null,e.left&&(this.left=e.left,e.left.parent=this),this.right=null,e.right&&(this.right=e.right,e.right.parent=this),!0)
:!1},i.prototype.delete=function(e,t){var n=[],r,i=this;if(!this.hasOwnProperty("key"))return;if(this.compareKeys(e,this.key)<0){this.left&&this.left.delete(e,t);return}if(this.compareKeys(e,this.key)>0){this.right&&this.right.delete(e,t);return}if(!this.compareKeys
(e,this.key)===0)return;if(this.data.length>1&&t!==undefined){this.data.forEach(function(e){i.checkValueEquality(e,t)||n.push(e)}),i.data=n;return}if(this.deleteIfLeaf())return;if(this.deleteIfOnlyOneChild())return;Math.random()>=.5?(r=this.left.getMaxKeyDescendant
(),this.key=r.key,this.data=r.data,this===r.parent?(this.left=r.left,r.left&&(r.left.parent=r.parent)):(r.parent.right=r.left,r.left&&(r.left.parent=r.parent))):(r=this.right.getMinKeyDescendant(),this.key=r.key,this.data=r.data,this===r.parent?(this.right=
r.right,r.right&&(r.right.parent=r.parent)):(r.parent.left=r.right,r.right&&(r.right.parent=r.parent)))},i.prototype.executeOnEveryNode=function(e){this.left&&this.left.executeOnEveryNode(e),e(this),this.right&&this.right.executeOnEveryNode(e)},i.prototype.
prettyPrint=function(e,t){t=t||"",console.log(t+"* "+this.key),e&&console.log(t+"* "+this.data);if(!this.left&&!this.right)return;this.left?this.left.prettyPrint(e,t+"  "):console.log(t+"  *"),this.right?this.right.prettyPrint(e,t+"  "):console.log(t+"  *")
},t.exports=i},{"./customUtils":17}],17:[function(e,t,n){function r(e){var t,n;return e===0?[]:e===1?[0]:(t=r(e-1),n=Math.floor(Math.random()*e),t.splice(n,0,e-1),t)}function i(e,t){if(e<t)return-1;if(e>t)return 1;if(e===t)return 0;var n=new Error("Couldn't compare elements"
);throw n.a=e,n.b=t,n}function s(e,t){return e===t}t.exports.getRandomArray=r,t.exports.defaultCompareKeysFunction=i,t.exports.defaultCheckValueEquality=s},{}],18:[function(n,r,i){var s=n("__browserify_process"),o=self;(function(){var t,n,r,i;(function(){var s=
{},o=e;t=function(e,t,n){s[e]={deps:t,callback:n}},i=r=n=function(e){function p(t){if(t.charAt(0)!==".")return t;var n=t.split("/"),r=e.split("/").slice(0,-1);for(var i=0,s=n.length;i<s;i++){var o=n[i];if(o==="..")r.pop();else{if(o===".")continue;r.push(o)}
}return r.join("/")}i._eak_seen=s;if(o[e])return o[e];o[e]={};if(!s[e])throw new Error("Could not find module "+e);var t=s[e],r=t.deps,u=t.callback,a=[],f;for(var l=0,c=r.length;l<c;l++)r[l]==="exports"?a.push(f={}):a.push(n(p(r[l])));var h=u.apply(this,a);
return o[e]=f||h}})(),t("promise/all",["./utils","exports"],function(e,t){function i(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function u(e){return function(t){a(e,t)}}function a(e,n){i[e]=n,--s===0&&
t(i)}var i=[],s=e.length,o;s===0&&t([]);for(var f=0;f<e.length;f++)o=e[f],o&&r(o.then)?o.then(u(f),n):a(f,o)})}var n=e.isArray,r=e.isFunction;t.all=i}),t("promise/asap",["exports"],function(e){function i(){return function(){s.nextTick(l)}}function u(){var e=0
,t=new n(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function a(){return function(){r.setTimeout(l,1)}}function l(){for(var e=0;e<f.length;e++){var t=f[e],n=t[0],r=t[1];n(r)}f=[]}function h(e,t){var n=f
.push([e,t]);n===1&&c()}var t=typeof window!="undefined"?window:{},n=t.MutationObserver||t.WebKitMutationObserver,r=typeof o!="undefined"?o:this===undefined?window:this,f=[],c;typeof s!="undefined"&&{}.toString.call(s)==="[object process]"?c=i():n?c=u():c=a
(),e.asap=h}),t("promise/config",["exports"],function(e){function n(e,n){if(arguments.length!==2)return t[e];t[e]=n}var t={instrument:!1};e.config=t,e.configure=n}),t("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){function s(){var e;typeof 
o!="undefined"?e=o:typeof window!="undefined"&&window.document?e=window:e=self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=
r)}var r=e.Promise,i=t.isFunction;n.polyfill=s}),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,i,s,o,u){function b(e){if(!c(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor"
);if(!(this instanceof b))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],w(e,this)}function w(e,t){function n(e){A(t,e)}function r(e){M(t,e)}try{
e(n,r)}catch(i){r(i)}}function E(e,t,n,r){var i=c(n),s,o,u,a;if(i)try{s=n(r),u=!0}catch(f){a=!0,o=f}else s=r,u=!0;if(L(t,s))return;i&&u?A(t,s):a?M(t,o):e===T?A(t,s):e===N&&M(t,s)}function C(e,t,n,r){var i=e._subscribers,s=i.length;i[s]=t,i[s+T]=n,i[s+N]=r}function k
(e,t){var n,r,i=e._subscribers,s=e._detail;for(var o=0;o<i.length;o+=3)n=i[o],r=i[o+t],E(t,n,r,s);e._subscribers=null}function L(e,t){var n=null,r;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(l(t)){n=t.then;if(
c(n))return n.call(t,function(n){if(r)return!0;r=!0,t!==n?A(e,n):O(e,n)},function(t){if(r)return!0;r=!0,M(e,t)}),!0}}catch(i){return r?!0:(M(e,i),!0)}return!1}function A(e,t){e===t?O(e,t):L(e,t)||O(e,t)}function O(e,t){if(e._state!==S)return;e._state=x,e._detail=
t,a.async(_,e)}function M(e,t){if(e._state!==S)return;e._state=x,e._detail=t,a.async(D,e)}function _(e){k(e,e._state=T)}function D(e){k(e,e._state=N)}var a=e.config,f=e.configure,l=t.objectOrFunction,c=t.isFunction,h=t.now,p=n.all,d=r.race,v=i.resolve,m=s.reject
,g=o.asap,y=0;a.async=g;var S=void 0,x=0,T=1,N=2;b.prototype={constructor:b,_state:undefined,_detail:undefined,_subscribers:undefined,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var i=arguments;a.async(function(){E(n._state
,r,i[n._state-1],n._detail)})}else C(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},b.all=p,b.race=d,b.resolve=v,b.reject=m,u.Promise=b}),t("promise/race",["./utils","exports"],function(e,t){function r(e){var t=this;if(!n(e))throw new 
TypeError("You must pass an array to race.");return new t(function(t,n){var r=[],i;for(var s=0;s<e.length;s++)i=e[s],i&&typeof i.then=="function"?i.then(t,n):t(i)})}var n=e.isArray;t.race=r}),t("promise/reject",["exports"],function(e){function t(e){var t=this
;return new t(function(t,n){n(e)})}e.reject=t}),t("promise/resolve",["exports"],function(e){function t(e){if(e&&typeof e=="object"&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),t("promise/utils",["exports"],function(
e){function t(e){return n(e)||typeof e=="object"&&e!==null}function n(e){return typeof e=="function"}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}var i=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=
n,e.isArray=r,e.now=i}),n("promise/polyfill").polyfill()})(),function(n,s){typeof i=="object"&&typeof r=="object"?r.exports=s():typeof t=="function"&&t.amd?t([],s):typeof i=="object"?i.localforage=s():n.localforage=s()}(this,function(){return function(e){function n
(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function"
)}t.__esModule=!0,function(){function l(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function c(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(f(t[n])?arguments
[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function h(e){for(var t in i)if(i.hasOwnProperty(t)&&i[t]===e)return!0;return!1}var e={},i={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},s=[i.INDEXEDDB,i.WEBSQL
,i.LOCALSTORAGE],o=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],u={description:"",driver:s.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},a=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||
e.OIndexedDB||e.msIndexedDB,n={};return n[i.WEBSQL]=!!e.openDatabase,n[i.INDEXEDDB]=!!function(){if(typeof e.openDatabase!="undefined"&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;
try{return t&&typeof t.open=="function"&&typeof e.IDBKeyRange!="undefined"}catch(n){return!1}}(),n[i.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),f=Array.isArray||function(
e){return Object.prototype.toString.call(e)==="[object Array]"},p=function(){function t(e){r(this,t),this.INDEXEDDB=i.INDEXEDDB,this.LOCALSTORAGE=i.LOCALSTORAGE,this.WEBSQL=i.WEBSQL,this._defaultConfig=c({},u),this._config=c({},this._defaultConfig,e),this._driverSet=
null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return t.prototype.config=function(t){if(typeof t=="object"){if(this._ready)return new Error("Can't call config() after localforage has been used."
);for(var n in t)n==="storeName"&&(t[n]=t[n].replace(/\W/g,"_")),this._config[n]=t[n];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return typeof t=="string"?this._config[t]:this._config},t.prototype.defineDriver=function(n,r,i){var s=new 
Promise(function(t,r){try{var i=n._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),u=new Error("Custom driver name already in use: "+n._driver);if(!n._driver){r(s);return}if(h(n._driver)){r(u);return}
var f=o.concat("_initStorage");for(var l=0;l<f.length;l++){var c=f[l];if(!c||!n[c]||typeof n[c]!="function"){r(s);return}}var p=Promise.resolve(!0);"_support"in n&&(n._support&&typeof n._support=="function"?p=n._support():p=Promise.resolve(!!n._support)),p.
then(function(r){a[i]=r,e[i]=n,t()},r)}catch(d){r(d)}});return s.then(r,i),s},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(r,i,s){var o=this,u=function(){if(h(r))switch(r){case o.INDEXEDDB:return new Promise(function(
e,t){e(n(1))});case o.LOCALSTORAGE:return new Promise(function(e,t){e(n(2))});case o.WEBSQL:return new Promise(function(e,t){e(n(4))})}else if(e[r])return Promise.resolve(e[r]);return Promise.reject(new Error("Driver not found."))}();return u.then(i,s),u},t
.prototype.getSerializer=function(t){var r=new Promise(function(e,t){e(n(3))});return t&&typeof t=="function"&&r.then(function(e){t(e)}),r},t.prototype.ready=function(t){var n=this,r=n._driverSet.then(function(){return n._ready===null&&(n._ready=n._initDriver
()),n._ready});return r.then(t,t),r},t.prototype.setDriver=function(t,n,r){function o(){i._config.driver=i.driver()}function u(e){return function(){function n(){while(t<e.length){var r=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(r).then(function(
e){return i._extend(e),o(),i._ready=i._initStorage(i._config),i._ready})["catch"](n)}o();var s=new Error("No available storage method found.");return i._driverSet=Promise.reject(s),i._driverSet}var t=0;return n()}}var i=this;f(t)||(t=[t]);var s=this._getSupportedDrivers
(t),a=this._driverSet!==null?this._driverSet["catch"](function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=a.then(function(){var e=s[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,o(),i._wrapLibraryMethodsWithReady
(),i._initDriver=u(s)})})["catch"](function(){o();var e=new Error("No available storage method found.");return i._driverSet=Promise.reject(e),i._driverSet}),this._driverSet.then(n,r),this._driverSet},t.prototype.supports=function(t){return!!a[t]},t.prototype
._extend=function(t){c(this,t)},t.prototype._getSupportedDrivers=function(t){var n=[];for(var r=0,i=t.length;r<i;r++){var s=t[r];this.supports(s)&&n.push(s)}return n},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<o.length;t++)l(this,o[t]
)},t.prototype.createInstance=function(n){return new t(n)},t}(),d=new p;t["default"]=d}.call(typeof window!="undefined"?window:self),e.exports=t["default"]},function(e,t){t.__esModule=!0,function(){function o(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(
r){if(r.name!=="TypeError")throw r;var i=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,s=new i;for(var o=0;o<t.length;o+=1)s.append(t[o]);return s.getBlob(n.type)}}function u(e){var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n)
;for(var i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function a(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){if(r.readyState!==4)return;if(r.status===200
)return t({response:r.response,type:r.getResponseHeader("Content-Type")});n({status:r.status,response:r.response})},r.send()})}function f(e){return(new Promise(function(t,n){var i=o([""],{type:"image/png"}),s=e.transaction([r],"readwrite");s.objectStore(r).
put(i,"key"),s.oncomplete=function(){var i=e.transaction([r],"readwrite"),s=i.objectStore(r).get("key");s.onerror=n,s.onsuccess=function(e){var n=e.target.result,r=URL.createObjectURL(n);a(r).then(function(e){t(!!e&&e.type==="image/png")},function(){t(!1)})
.then(function(){URL.revokeObjectURL(r)})}}}))["catch"](function(){return!1})}function l(e){return typeof i=="boolean"?Promise.resolve(i):f(e).then(function(e){return i=e,i})}function c(e){return new Promise(function(t,n){var r=new FileReader;r.onerror=n,r.
onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function h(e){var t=u(atob(e.data));return o([t],{type:e.type})}function p(e){return e&&e.__local_forage_encoded_blob}function d
(e){function u(){return Promise.resolve()}var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];s||(s={});var i=s[n.name];i||(i={forages:[],db:null},s[n.name]=i),i.forages.push(this);var o=[];for(var a=0;a<i.forages.length;a++){var f=i.forages[a];f!==this&&o
.push(f.ready()["catch"](u))}var l=i.forages.slice(0);return Promise.all(o).then(function(){return n.db=i.db,v(n)}).then(function(e){return n.db=e,y(n,t._defaultConfig.version)?m(n):e}).then(function(e){n.db=i.db=e,t._dbInfo=n;for(var r in l){var s=l[r];s!==
t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}})}function v(e){return g(e,!1)}function m(e){return g(e,!0)}function g(t,i){return new Promise(function(s,o){if(t.db){if(!i)return s(t.db);t.db.close()}var u=[t.name];i&&u.push(t.version);var a=n.open.apply
(n,u);i&&(a.onupgradeneeded=function(n){var i=a.result;try{i.createObjectStore(t.storeName),n.oldVersion<=1&&i.createObjectStore(r)}catch(s){if(s.name!=="ConstraintError")throw s;e.console.warn('The database "'+t.name+'"'+" has been upgraded from version "+
n.oldVersion+" to version "+n.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(){o(a.error)},a.onsuccess=function(){s(a.result)}})}function y(t,n){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),i=
t.version<t.db.version,s=t.version>t.db.version;i&&(t.version!==n&&e.console.warn('The database "'+t.name+'"'+" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version);if(s||r){if(r){var o=t.db.version+1;o>t.version&&
(t.version=o)}return!0}return!1}function b(t,n){var r=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,n){r.ready().then(function(){var i=r._dbInfo,s=i.db.transaction(i.storeName
,"readonly").objectStore(i.storeName),o=s.get(t);o.onsuccess=function(){var t=o.result;t===undefined&&(t=null),p(t)&&(t=h(t)),e(t)},o.onerror=function(){n(o.error)}})["catch"](n)});return k(i,n),i}function w(e,t){var n=this,r=new Promise(function(t,r){n.ready
().then(function(){var i=n._dbInfo,s=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=s.openCursor(),u=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;p(r)&&(r=h(r));var i=e(r,n.key,u++);i!==void 0?t(i):n["continue"]()}else t(
)},o.onerror=function(){r(o.error)}})["catch"](r)});return k(r,t),r}function E(t,n,r){var i=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var s=new Promise(function(e,r){var s;i.ready().then(function(){return s=
i._dbInfo,l(s.db)}).then(function(e){return!e&&n instanceof Blob?c(n):n}).then(function(n){var i=s.db.transaction(s.storeName,"readwrite"),o=i.objectStore(s.storeName);n===null&&(n=undefined);var u=o.put(n,t);i.oncomplete=function(){n===undefined&&(n=null),
e(n)},i.onabort=i.onerror=function(){var e=u.error?u.error:u.transaction.error;r(e)}})["catch"](r)});return k(s,r),s}function S(t,n){var r=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(
e,n){r.ready().then(function(){var i=r._dbInfo,s=i.db.transaction(i.storeName,"readwrite"),o=s.objectStore(i.storeName),u=o["delete"](t);s.oncomplete=function(){e()},s.onerror=function(){n(u.error)},s.onabort=function(){var e=u.error?u.error:u.transaction.error
;n(e)}})["catch"](n)});return k(i,n),i}function x(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),s=i.objectStore(r.storeName),o=s.clear();i.oncomplete=function(){e()},i.onabort=
i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}})["catch"](n)});return k(n,e),n}function T(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName
),s=i.count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}})["catch"](n)});return k(n,e),n}function N(e,t){var n=this,r=new Promise(function(t,r){if(e<0){t(null);return}n.ready().then(function(){var i=n._dbInfo,s=i.db.transaction(i.storeName
,"readonly").objectStore(i.storeName),o=!1,u=s.openCursor();u.onsuccess=function(){var n=u.result;if(!n){t(null);return}e===0?t(n.key):o?t(n.key):(o=!0,n.advance(e))},u.onerror=function(){r(u.error)}})["catch"](r)});return k(r,t),r}function C(e){var t=this,
n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),s=i.openCursor(),o=[];s.onsuccess=function(){var t=s.result;if(!t){e(o);return}o.push(t.key),t["continue"]()},s.onerror=
function(){n(s.error)}})["catch"](n)});return k(n,e),n}function k(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var e=this,n=n||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(!n)return;var r="local-forage-detect-blob-support"
,i,s,L={_driver:"asyncStorage",_initStorage:d,iterate:w,getItem:b,setItem:E,removeItem:S,clear:x,length:T,key:N,keys:C};t["default"]=L}.call(typeof window!="undefined"?window:self),e.exports=t["default"]},function(e,t,n){t.__esModule=!0,function(){function s
(e){var t=this,r={};if(e)for(var i in e)r[i]=e[i];return r.keyPrefix=r.name+"/",r.storeName!==t._defaultConfig.storeName&&(r.keyPrefix+=r.storeName+"/"),t._dbInfo=r,(new Promise(function(e,t){e(n(3))})).then(function(e){return r.serializer=e,Promise.resolve
()})}function o(e){var t=this,n=t.ready().then(function(){var e=t._dbInfo.keyPrefix;for(var n=r.length-1;n>=0;n--){var i=r.key(n);i.indexOf(e)===0&&r.removeItem(i)}});return d(n,e),n}function u(t,n){var i=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."
),t=String(t));var s=i.ready().then(function(){var e=i._dbInfo,n=r.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n});return d(s,n),s}function a(e,t){var n=this,i=n.ready().then(function(){var t=n._dbInfo,i=t.keyPrefix,s=i.length,o=r.length
,u=1;for(var a=0;a<o;a++){var f=r.key(a);if(f.indexOf(i)!==0)continue;var l=r.getItem(f);l&&(l=t.serializer.deserialize(l)),l=e(l,f.substring(s),u++);if(l!==void 0)return l}});return d(i,t),i}function f(e,t){var n=this,i=n.ready().then(function(){var t=n._dbInfo
,i;try{i=r.key(e)}catch(s){i=null}return i&&(i=i.substring(t.keyPrefix.length)),i});return d(i,t),i}function l(e){var t=this,n=t.ready().then(function(){var e=t._dbInfo,n=r.length,i=[];for(var s=0;s<n;s++)r.key(s).indexOf(e.keyPrefix)===0&&i.push(r.key(s).substring
(e.keyPrefix.length));return i});return d(n,e),n}function c(e){var t=this,n=t.keys().then(function(e){return e.length});return d(n,e),n}function h(t,n){var i=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));
var s=i.ready().then(function(){var e=i._dbInfo;r.removeItem(e.keyPrefix+t)});return d(s,n),s}function p(t,n,i){var s=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=s.ready().then(function(){n===undefined&&
(n=null);var e=n;return new Promise(function(i,o){var u=s._dbInfo;u.serializer.serialize(n,function(n,s){if(s)o(s);else try{r.setItem(u.keyPrefix+t,n),i(e)}catch(a){(a.name==="QuotaExceededError"||a.name==="NS_ERROR_DOM_QUOTA_REACHED")&&o(a),o(a)}})})});return d
(o,i),o}function d(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var e=this,r=null;try{if(!this.localStorage||!("setItem"in this.localStorage))return;r=this.localStorage}catch(i){return}var v={_driver:"localStorageWrapper",_initStorage:s,iterate:
a,getItem:u,setItem:p,removeItem:h,clear:o,length:c,key:f,keys:l};t["default"]=v}.call(typeof window!="undefined"?window:self),e.exports=t["default"]},function(e,t){t.__esModule=!0,function(){function b(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n)
{if(n.name!=="TypeError")throw n;var r=y.BlobBuilder||y.MSBlobBuilder||y.MozBlobBuilder||y.WebKitBlobBuilder,i=new r;for(var s=0;s<e.length;s+=1)i.append(e[s]);return i.getBlob(t.type)}}function w(e,t){var r="";e&&(r=e.toString());if(e&&(e.toString()==="[object ArrayBuffer]"||
e.buffer&&e.buffer.toString()==="[object ArrayBuffer]")){var s,g=i;e instanceof ArrayBuffer?(s=e,g+=o):(s=e.buffer,r==="[object Int8Array]"?g+=a:r==="[object Uint8Array]"?g+=f:r==="[object Uint8ClampedArray]"?g+=l:r==="[object Int16Array]"?g+=c:r==="[object Uint16Array]"?
g+=p:r==="[object Int32Array]"?g+=h:r==="[object Uint32Array]"?g+=d:r==="[object Float32Array]"?g+=v:r==="[object Float64Array]"?g+=m:t(new Error("Failed to get type for BinaryArray"))),t(g+x(s))}else if(r==="[object Blob]"){var y=new FileReader;y.onload=function(
){var r=n+e.type+"~"+x(this.result);t(i+u+r)},y.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(b){console.error("Couldn't convert value into a JSON string: ",e),t(null,b)}}function E(e){if(e.substring(0,s)!==i)return JSON.parse(e);var t=e.substring
(g),n=e.substring(s,g),y;if(n===u&&r.test(t)){var w=t.match(r);y=w[1],t=t.substring(w[0].length)}var E=S(t);switch(n){case o:return E;case u:return b([E],{type:y});case a:return new Int8Array(E);case f:return new Uint8Array(E);case l:return new Uint8ClampedArray
(E);case c:return new Int16Array(E);case p:return new Uint16Array(E);case h:return new Int32Array(E);case d:return new Uint32Array(E);case v:return new Float32Array(E);case m:return new Float64Array(E);default:throw new Error("Unkown type: "+n)}}function S(
t){var n=t.length*.75,r=t.length,i,s=0,o,u,a,f;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);var l=new ArrayBuffer(n),c=new Uint8Array(l);for(i=0;i<r;i+=4)o=e.indexOf(t[i]),u=e.indexOf(t[i+1]),a=e.indexOf(t[i+2]),f=e.indexOf(t[i+3]),c[s++]=o<<2|u>>4,c
[s++]=(u&15)<<4|a>>2,c[s++]=(a&3)<<6|f&63;return l}function x(t){var n=new Uint8Array(t),r="",i;for(i=0;i<n.length;i+=3)r+=e[n[i]>>2],r+=e[(n[i]&3)<<4|n[i+1]>>4],r+=e[(n[i+1]&15)<<2|n[i+2]>>6],r+=e[n[i+2]&63];return n.length%3===2?r=r.substring(0,r.length-1
)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="~~local_forage_type~",r=/^~~local_forage_type~([^~]+)~/,i="__lfsc__:",s=i.length,o="arbf",u="blob",a="si08",f="ui08",l="uic8"
,c="si16",h="si32",p="ur16",d="ui32",v="fl32",m="fl64",g=s+o.length,y=this,T={serialize:w,deserialize:E,stringToBuffer:S,bufferToString:x};t["default"]=T}.call(typeof window!="undefined"?window:self),e.exports=t["default"]},function(e,t,n){t.__esModule=!0,function(
){function i(e){var t=this,i={db:null};if(e)for(var s in e)i[s]=typeof e[s]!="string"?e[s].toString():e[s];var o=new Promise(function(n,s){try{i.db=r(i.name,String(i.version),i.description,i.size)}catch(o){return t.setDriver(t.LOCALSTORAGE).then(function(){
return t._initStorage(e)}).then(n)["catch"](s)}i.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=i,n()},function(e,t){s(t)})})});return(new Promise(function(
e,t){e(n(3))})).then(function(e){return i.serializer=e,o})}function s(t,n){var r=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,n){r.ready().then(function(){var i=r._dbInfo;i.db
.transaction(function(r){r.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)},function(e,t){n(t)})})})["catch"](n)});return p(i,n),i}function o
(e,t){var n=this,r=new Promise(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){var s=r.rows,o=s.length;for(var u=0;u<o;u++){var a=s.item(u),f=a.value;f&&(f=i.serializer
.deserialize(f)),f=e(f,a.key,u+1);if(f!==void 0){t(f);return}}t()},function(e,t){r(t)})})})["catch"](r)});return p(r,t),r}function u(t,n,r){var i=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var s=new Promise
(function(e,r){i.ready().then(function(){n===undefined&&(n=null);var s=n,o=i._dbInfo;o.serializer.serialize(n,function(n,i){i?r(i):o.db.transaction(function(i){i.executeSql("INSERT OR REPLACE INTO "+o.storeName+" (key, value) VALUES (?, ?)",[t,n],function()
{e(s)},function(e,t){r(t)})},function(e){e.code===e.QUOTA_ERR&&r(e)})})})["catch"](r)});return p(s,r),s}function a(t,n){var r=this;typeof t!="string"&&(e.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,n){
r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[t],function(){e()},function(e,t){n(t)})})})["catch"](n)});return p(i,n),i}function f(e){var t=this,n=new Promise(function(e,n){t
.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return p(n,e),n}function l(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(
){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return p(n,e),n}function c(e,t){var n=this,r=new Promise(function(t,r
){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return p
(r,t),r}function h(e){var t=this,n=new Promise(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){var r=[];for(var i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key
);e(r)},function(e,t){n(t)})})})["catch"](n)});return p(n,e),n}function p(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var e=this,r=this.openDatabase;if(!r)return;var d={_driver:"webSQLStorage",_initStorage:i,iterate:o,getItem:s,setItem:u,removeItem
:a,clear:f,length:l,key:c,keys:h};t["default"]=d}.call(typeof window!="undefined"?window:self),e.exports=t["default"]}])})},{__browserify_process:4}],19:[function(e,t,n){(function(){var e=this,r=e._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype
,a=s.push,f=s.slice,l=s.concat,c=o.toString,h=o.hasOwnProperty,p=s.forEach,d=s.map,v=s.reduce,m=s.reduceRight,g=s.filter,y=s.every,b=s.some,w=s.indexOf,E=s.lastIndexOf,S=Array.isArray,x=Object.keys,T=u.bind,N=function(e){if(e instanceof N)return e;if(!(this instanceof 
N))return new N(e);this._wrapped=e};typeof n!="undefined"?(typeof t!="undefined"&&t.exports&&(n=t.exports=N),n._=N):e._=N,N.VERSION="1.4.4";var C=N.each=N.forEach=function(e,t,n){if(e==null)return;if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length
){for(var r=0,s=e.length;r<s;r++)if(t.call(n,e[r],r,e)===i)return}else for(var o in e)if(N.has(e,o)&&t.call(n,e[o],o,e)===i)return};N.map=N.collect=function(e,t,n){var r=[];return e==null?r:d&&e.map===d?e.map(t,n):(C(e,function(e,i,s){r[r.length]=t.call(n,e
,i,s)}),r)};var k="Reduce of empty array with no initial value";N.reduce=N.foldl=N.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduce===v)return r&&(t=N.bind(t,r)),i?e.reduce(t,n):e.reduce(t);C(e,function(e,s,o){i?n=t.call(r,n,
e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(k);return n},N.reduceRight=N.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(m&&e.reduceRight===m)return r&&(t=N.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=
N.keys(e);s=o.length}C(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(k);return n},N.find=N.detect=function(e,t,n){var r;return L(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},N.filter=N.select=
function(e,t,n){var r=[];return e==null?r:g&&e.filter===g?e.filter(t,n):(C(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},N.reject=function(e,t,n){return N.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},N.every=N.all=function(e,t,n){t||(t=N.
identity);var r=!0;return e==null?r:y&&e.every===y?e.every(t,n):(C(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var L=N.some=N.any=function(e,t,n){t||(t=N.identity);var r=!1;return e==null?r:b&&e.some===b?e.some(t,n):(C(e,function(e,s,o){if(
r||(r=t.call(n,e,s,o)))return i}),!!r)};N.contains=N.include=function(e,t){return e==null?!1:w&&e.indexOf===w?e.indexOf(t)!=-1:L(e,function(e){return e===t})},N.invoke=function(e,t){var n=f.call(arguments,2),r=N.isFunction(t);return N.map(e,function(e){return(
r?t:e[t]).apply(e,n)})},N.pluck=function(e,t){return N.map(e,function(e){return e[t]})},N.where=function(e,t,n){return N.isEmpty(t)?n?null:[]:N[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},N.findWhere=function(e,t){return N
.where(e,t,!0)},N.max=function(e,t,n){if(!t&&N.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&N.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return C(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&
(r={value:e,computed:o})}),r.value},N.min=function(e,t,n){if(!t&&N.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&N.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return C(e,function(e,i,s){var o=t?t.call(
n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},N.shuffle=function(e){var t,n=0,r=[];return C(e,function(e){t=N.random(n++),r[n-1]=r[t],r[t]=e}),r};var A=function(e){return N.isFunction(e)?e:function(t){return t[e]}};N.sortBy=function(e,t,n){var r=
A(t);return N.pluck(N.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var O=function(
e,t,n,r){var i={},s=A(t||N.identity);return C(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};N.groupBy=function(e,t,n){return O(e,t,n,function(e,t,n){(N.has(e,t)?e[t]:e[t]=[]).push(n)})},N.countBy=function(e,t,n){return O(e,t,n,function(e,t){N.has(e,t)||
(e[t]=0),e[t]++})},N.sortedIndex=function(e,t,n,r){n=n==null?N.identity:A(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},N.toArray=function(e){return e?N.isArray(e)?f.call(e):e.length===+e.length?N.map(e,N.
identity):N.values(e):[]},N.size=function(e){return e==null?0:e.length===+e.length?e.length:N.keys(e).length},N.first=N.head=N.take=function(e,t,n){return e==null?void 0:t!=null&&!n?f.call(e,0,t):e[0]},N.initial=function(e,t,n){return f.call(e,0,e.length-(t==
null||n?1:t))},N.last=function(e,t,n){return e==null?void 0:t!=null&&!n?f.call(e,Math.max(e.length-t,0)):e[e.length-1]},N.rest=N.tail=N.drop=function(e,t,n){return f.call(e,t==null||n?1:t)},N.compact=function(e){return N.filter(e,N.identity)};var M=function(
e,t,n){return C(e,function(e){N.isArray(e)?t?a.apply(n,e):M(e,t,n):n.push(e)}),n};N.flatten=function(e,t){return M(e,t,[])},N.without=function(e){return N.difference(e,f.call(arguments,1))},N.uniq=N.unique=function(e,t,n,r){N.isFunction(t)&&(r=n,n=t,t=!1);var i=
n?N.map(e,n,r):e,s=[],o=[];return C(i,function(n,r){if(t?!r||o[o.length-1]!==n:!N.contains(o,n))o.push(n),s.push(e[r])}),s},N.union=function(){return N.uniq(l.apply(s,arguments))},N.intersection=function(e){var t=f.call(arguments,1);return N.filter(N.uniq(e
),function(e){return N.every(t,function(t){return N.indexOf(t,e)>=0})})},N.difference=function(e){var t=l.apply(s,f.call(arguments,1));return N.filter(e,function(e){return!N.contains(t,e)})},N.zip=function(){var e=f.call(arguments),t=N.max(N.pluck(e,"length"
)),n=new Array(t);for(var r=0;r<t;r++)n[r]=N.pluck(e,""+r);return n},N.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},N.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length
;if(n){if(typeof n!="number")return r=N.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},N.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(E&&e.lastIndexOf===
E)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},N.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e
,e+=n;return s},N.bind=function(e,t){if(e.bind===T&&T)return T.apply(e,f.call(arguments,1));var n=f.call(arguments,2);return function(){return e.apply(t,n.concat(f.call(arguments)))}},N.partial=function(e){var t=f.call(arguments,1);return function(){return e
.apply(this,t.concat(f.call(arguments)))}},N.bindAll=function(e){var t=f.call(arguments,1);return t.length===0&&(t=N.functions(e)),C(t,function(t){e[t]=N.bind(e[t],e)}),e},N.memoize=function(e,t){var n={};return t||(t=N.identity),function(){var r=t.apply(this
,arguments);return N.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},N.delay=function(e,t){var n=f.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},N.defer=function(e){return N.delay.apply(N,[e,1].concat(f.call(arguments,1)))},N.throttle=
function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},N.debounce=function(e,t,n){var r,i;
return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},N.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}
,N.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},N.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},N.after=function(e,t){return e<=0?
t():function(){if(--e<1)return t.apply(this,arguments)}},N.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)N.has(e,n)&&(t[t.length]=n);return t},N.values=function(e){var t=[];for(var n in e)N.has(e,n)&&t.push
(e[n]);return t},N.pairs=function(e){var t=[];for(var n in e)N.has(e,n)&&t.push([n,e[n]]);return t},N.invert=function(e){var t={};for(var n in e)N.has(e,n)&&(t[e[n]]=n);return t},N.functions=N.methods=function(e){var t=[];for(var n in e)N.isFunction(e[n])&&
t.push(n);return t.sort()},N.extend=function(e){return C(f.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},N.pick=function(e){var t={},n=l.apply(s,f.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},N.omit=function(e){var t=
{},n=l.apply(s,f.call(arguments,1));for(var r in e)N.contains(n,r)||(t[r]=e[r]);return t},N.defaults=function(e){return C(f.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},N.clone=function(e){return N.isObject(e)?N.isArray(e)?
e.slice():N.extend({},e):e},N.tap=function(e,t){return t(e),e};var _=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof N&&(e=e._wrapped),t instanceof N&&(t=t._wrapped);var i=c.call(e);if(i!=c.call(t))return!1;switch(
i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&
e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=_(e[o],t[o],n,r)))break}
else{var a=e.constructor,f=t.constructor;if(a!==f&&!(N.isFunction(a)&&a instanceof a&&N.isFunction(f)&&f instanceof f))return!1;for(var l in e)if(N.has(e,l)){o++;if(!(u=N.has(t,l)&&_(e[l],t[l],n,r)))break}if(u){for(l in t)if(N.has(t,l)&&!(o--))break;u=!o}}return n
.pop(),r.pop(),u};N.isEqual=function(e,t){return _(e,t,[],[])},N.isEmpty=function(e){if(e==null)return!0;if(N.isArray(e)||N.isString(e))return e.length===0;for(var t in e)if(N.has(e,t))return!1;return!0},N.isElement=function(e){return!!e&&e.nodeType===1},N.
isArray=S||function(e){return c.call(e)=="[object Array]"},N.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){N["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),N.isArguments(arguments
)||(N.isArguments=function(e){return!!e&&!!N.has(e,"callee")}),typeof /./!="function"&&(N.isFunction=function(e){return typeof e=="function"}),N.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},N.isNaN=function(e){return N.isNumber(e)&&e!=+e}
,N.isBoolean=function(e){return e===!0||e===!1||c.call(e)=="[object Boolean]"},N.isNull=function(e){return e===null},N.isUndefined=function(e){return e===void 0},N.has=function(e,t){return h.call(e,t)},N.noConflict=function(){return e._=r,this},N.identity=function(
e){return e},N.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},N.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"
,"/":"&#x2F;"}};D.unescape=N.invert(D.escape);var P={escape:new RegExp("["+N.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+N.keys(D.unescape).join("|")+")","g")};N.each(["escape","unescape"],function(e){N[e]=function(t){return t==null?"":(""+t).replace
(P[e],function(t){return D[e][t]})}}),N.result=function(e,t){if(e==null)return null;var n=e[t];return N.isFunction(n)?n.call(e):n},N.mixin=function(e){C(N.functions(e),function(t){var n=N[t]=e[t];N.prototype[t]=function(){var e=[this._wrapped];return a.apply
(e,arguments),I.call(this,n.apply(N,e))}})};var H=0;N.uniqueId=function(e){var t=++H+"";return e?e+t:t},N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n"
,"	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;N.template=function(e,t,n){var r;n=N.defaults({},n,N.templateSettings);var i=new RegExp([(n.escape||B).source,(n.interpolate||B).source,(n.evaluate||B).source].join("|")+"|$","g"),
s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(F,function(e){return"\\"+j[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}
),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,N)
;var a=function(e){return r.call(this,e,N)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},N.chain=function(e){return N(e).chain()};var I=function(e){return this._chain?N(e).chain():e};N.mixin(N),C(["pop","push","reverse","shift","sort","splice"
,"unshift"],function(e){var t=s[e];N.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],I.call(this,n)}}),C(["concat","join","slice"],function(e){var t=s[e];N.prototype[e]=function(){
return I.call(this,t.apply(this._wrapped,arguments))}}),N.extend(N.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}]},{},[7])(7)});switch(e.modeJs){case"browser":e.Nedb=e.global.utility2_nedb=
e.global.Nedb,e.Nedb.NODE_ENV="undefined";break;case"node":e.Nedb=module["./lib.nedb.js"]=module.sandbox2=module.exports,e.Nedb.__dirname=__dirname,e.Nedb.NODE_ENV=process.env.NODE_ENV,e.child_process=n("child_process"),e.fs=n("fs")}(function(){e.Nedb.Nedb=
e.Nedb.local=e.Nedb,Object.keys(e).forEach(function(t){e.Nedb[t.replace(/.*\//,"")]=e[t]}),e=e.Nedb,e.assert=function(e,t){var n;if(e)return;throw n=t&&t.message?t:new Error(typeof t=="string"?t:JSON.stringify(t)),n},e.dbExport=function(){return Object.keys
(e.dbTableDict).map(function(t){return e.dbTableDict[t].export()}).join("\n\n")},e.dbImport=function(t,n){var r;r=function(){r.counter-=1,r.counter===0&&n()},r.counter=0,r.counter+=1,t.trim().split("\n\n").forEach(function(t){r.counter+=1,e.dbTableCreate({persistenceData
:t,name:JSON.parse(/.*/.exec(t)[0])},r)}),r()},e.dbReset=function(t){var n;n=function(){n.counter-=1,n.counter===0&&t()},n.counter=0,n.counter+=1,Object.keys(e.dbTableDict).forEach(function(t){n.counter+=1,e.dbTableDrop({name:t},n)}),e.modeJs==="browser"?(n
.counter+=1,window.indexedDB.deleteDatabase("NeDB"),setTimeout(n)):(n.counter+=1,e.fs.readdir(e.fsDir(),function(t,r){e.assert(!t,t),r.forEach(function(t){n.counter+=1,e.fs.unlink(e.fsDir()+"/"+t,n)}),n()})),n()},e.dbTableCreate=function(t,n){var r,i,s,o;return i=0
,s=function(u){i=u?Infinity:i+1;switch(i){case 1:o=e.dbTableDict[t.name],o||(o=e.dbTableDict[t.name]=new e.Nedb({filename:e.fsDir()+"/"+t.name,timestampData:!0}),o.name=String(t.name)),n=n||function(t){e.assert(!t,t)},r=(t.persistenceData||"").trim(),t.reset&&
(r="undefined");if(!r){s();return}o.isLoaded=null,r+="\n",r=r.slice(r.indexOf("\n")+1),e.storage.writeFile(o.filename,r,s);break;case 2:if(o.isLoaded){s();return}o.isLoaded=!0,o.loadDatabase(s);break;default:n(u,o)}},s(t.error),o},e.dbTableDict={},e.dbTableDrop=
function(t,n){var r;r=e.dbTableDict[t.name];if(!r){n();return}delete e.dbTableDict[t.name],r.persistence=r.prototype=r,r.persistCachedDatabase=r.persistNewState=function(){var e;for(e=0;e<arguments.length;e+=1)if(typeof arguments[e]=="function"){arguments[e
]();return}},e.storage.unlink(r.filename,function(){n()})},e.fsDir=function(){var n;return n="tmp/nedb.persistence."+e.NODE_ENV,e.modeJs==="node"&&n!==e.fsDirInitialized&&e.storage.mkdirp(n,t),e.fsDirInitialized=n,n},e.jsonStringifyOrdered=function(e,t,n){var r
,i,s;return i=function(e){if(e&&typeof e=="object"&&typeof e.toJSON!="function"){if(r.indexOf(e)>=0)return;return r.push(e),Array.isArray(e)?"["+e.map(function(e){return s=i(e),typeof s=="string"?s:"null"}).join(",")+"]":"{"+Object.keys(e).sort().map(function(
t){return s=i(e[t]),typeof s=="string"?JSON.stringify(t)+":"+s:undefined}).filter(function(e){return typeof e=="string"}).join(",")+"}"}return JSON.stringify(e)},r=[],JSON.stringify(e&&typeof e=="object"?JSON.parse(i(e)):e,t,n)},e.prototype.export=function(
){var t,n;return t=JSON.stringify(String(this.name))+"\n",n=this,n.getAllData().forEach(function(n){t+=e.model.serialize(n)+"\n"}),Object.keys(n.indexes).forEach(function(r){if(r==="_id")return;t+=e.model.serialize({$$indexCreated:{fieldName:r,unique:n.indexes
[r].unique,sparse:n.indexes[r].sparse}})+"\n"}),t.trim()}})()})(function(){"use strict";var e;return e={},e.modeJs=function(){try{return typeof navigator.userAgent=="string"&&typeof document.querySelector("body")=="object"&&typeof XMLHttpRequest.prototype.open=="function"&&"browser"
}catch(e){return module.exports&&typeof process.versions.node=="string"&&typeof require("http").createServer=="function"&&"node"}}(),e.modeJs==="node"&&(e.require2=require),e}())